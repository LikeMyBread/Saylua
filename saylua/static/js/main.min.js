var _FormValidation=function(){function r(r){var t=0,a=r.currentTarget,n=a.querySelectorAll("input, textarea"),i=document.getElementById(a.getAttribute("data-error-id"));i&&(i.innerHTML="");for(var o=0;o<n.length;o++){var l=n[o].getAttribute("data-validators");if(l){removeClass(n[o],"error"),l=l.split(" ");for(var d=!0,u=0;d&&u<l.length;u++){var c=l[u].split(":"),s=c[0];if(!e[s])throw"Invalid validator type: "+s;if(c=[n[o].value].concat(c.slice(1)),!e[s].validator.apply(this,c)){addClass(n[o],"error");for(var f=capitalizeFirst(n[o].name),v=e[s].error.replace("<field>",f),m=1;m<c.length;m++)v=v.replace("<"+m+">",c[m]);t++,d=!1,i.innerHTML+='<p class="error">'+v+"</p>"}}}}return!(t>0)||(r.preventDefault(),!1)}var e={required:{error:"<field> is required. ",validator:function(r){return""!=r}},min:{error:"<field> cannot be shorter than <1> characters. ",validator:function(r,e){return r.length>=e}},max:{error:"<field> cannot be longer than <1> characters. ",validator:function(r,e){return r.length<=e}},username_chars:{error:"<field> may only contain letters, numbers, or these special characters: _.+!*()- ",validator:function(r){var e=new RegExp("^[A-Za-z0-9_.+!*()-]+$");return e.test(r)}},no_repeated_underscores:{error:"<field> may not contain two underscores in a row. ",validator:function(r){return r.indexOf("__")<0}},match_password:{error:"Passwords must match! ",validator:function(r,e){return document.getElementById(e).value===r}},email:{error:"<field> must be a valid email. ",validator:function(r){return/\S+@\S+\.\S+/.test(r)}}};return function(){this.bind=function(e){for(var t=document.querySelectorAll(e),a=0;a<t.length;a++)t[a].addEventListener("submit",r)}}}(),FormValidation=new _FormValidation;
function fixNavbar(){var e=document.getElementById("banner").offsetHeight;document.body.scrollTop>e||document.documentElement.scrollTop>e?addClass(document.getElementById("navbar"),"fixed"):removeClass(document.getElementById("navbar"),"fixed")}window.addEventListener("load",function(){window.addEventListener("scroll",fixNavbar),FormValidation.bind(".validated-form")});
!function(t){function e(){var t=document.createDocumentFragment();if(this.modal=document.createElement("div"),this.modal.className="modal "+this.settings.className,this.modal.style.minWidth=this.settings.minWidth+"px",this.modal.style.maxWidth=this.settings.maxWidth+"px",this.settings.hasCloseButton===!0&&(this.closeButton=document.createElement("button"),this.closeButton.className="modal-close modal-close-button",this.closeButton.innerHTML="Ã—",this.modal.appendChild(this.closeButton)),this.settings.hasOverlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="modal-overlay "+this.settings.className,t.appendChild(this.overlay)),null!==this.settings.title){var e=document.createElement("h2");e.className="modal-title",e.innerHTML=this.settings.title,this.modal.appendChild(e)}var i=document.createElement("div");i.className="modal-content",i.innerHTML=this.settings.content,this.modal.appendChild(i),t.appendChild(this.modal),document.body.appendChild(t)}function i(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function s(){var t=document.createElement("div");return t.style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend"}function n(t){t.parentElement&&t.parentElement.removeChild(t)}t.Modal=function(t){this.modal=null,this.overlay=null,this.closeButton=null,this.settings={className:"zoom",hasCloseButton:!0,content:"",title:null,maxWidth:800,minWidth:200,hasOverlay:!0,isFixed:!0,linkSelector:null};var e=this;if(t&&"object"==typeof t)for(var i in this.settings)t.hasOwnProperty(i)&&(this.settings[i]=t[i]);var s=this.settings.content;if(s&&s.innerHTML&&(s=s.innerHTML,n(this.settings.content),this.settings.content=s),null!==this.settings.linkSelector)for(var l=document.querySelectorAll(this.settings.linkSelector),a=0;a<l.length;a++)l[a].addEventListener("click",function(t){t.preventDefault(),e.open()})},Modal.prototype.open=function(){e.call(this),i.call(this),window.getComputedStyle(this.modal).height,this.modal.className+=this.modal.offsetHeight>window.innerHeight?" modal-active modal-anchored":" modal-active",this.overlay&&(this.overlay.className+=" modal-active")},Modal.prototype.close=function(){var t=this;this.modal.className=this.modal.className.replace(" modal-active",""),this.modal.addEventListener(s(),function(){n(t.modal)}),this.overlay&&(this.overlay.className=this.overlay.className.replace(" modal-active",""),this.overlay.addEventListener(s(),function(){n(t.overlay)}))}}(window);
function hasClass(s,a){return s.classList?s.classList.contains(a):!!s.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}function addClass(s,a){s.classList?s.classList.add(a):hasClass(s,a)||(s.className+=" "+a)}function removeClass(s,a){if(s.classList)s.classList.remove(a);else if(hasClass(s,a)){var e=new RegExp("(\\s|^)"+a+"(\\s|$)");s.className=s.className.replace(e," ")}}function capitalizeFirst(s){return s.charAt(0).toUpperCase()+s.slice(1)}function removeElement(s){s&&s.parentNode.removeChild(s)}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZvcm1WYWxpZGF0ZS5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInV0aWxzLmpzIl0sIm5hbWVzIjpbIl9Gb3JtVmFsaWRhdGlvbiIsIl9mb3JtU3VibWl0TGlzdGVuZXIiLCJlIiwiZXJyQ291bnQiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsImZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnJvckNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJqIiwibGVuZ3RoIiwidmFsaWRhdG9ycyIsInJlbW92ZUNsYXNzIiwic3BsaXQiLCJub0Vycm9ycyIsImsiLCJwYXJhbXMiLCJ2YWxOYW1lIiwidmFsaWRhdG9yTGlzdCIsInZhbHVlIiwiY29uY2F0Iiwic2xpY2UiLCJ2YWxpZGF0b3IiLCJhcHBseSIsInRoaXMiLCJhZGRDbGFzcyIsImZpZWxkIiwiY2FwaXRhbGl6ZUZpcnN0IiwibmFtZSIsImVyciIsImVycm9yIiwicmVwbGFjZSIsImwiLCJwcmV2ZW50RGVmYXVsdCIsInJlcXVpcmVkIiwiaW5wdXQiLCJtaW4iLCJtYXgiLCJ1c2VybmFtZV9jaGFycyIsInJlZyIsIlJlZ0V4cCIsInRlc3QiLCJub19yZXBlYXRlZF91bmRlcnNjb3JlcyIsImluZGV4T2YiLCJtYXRjaF9wYXNzd29yZCIsIm1hdGNoX2lkIiwiZW1haWwiLCJiaW5kIiwic2VsZWN0b3IiLCJmb3JtcyIsImkiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRpb24iLCJmaXhOYXZiYXIiLCJ0b3AiLCJvZmZzZXRIZWlnaHQiLCJib2R5Iiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50Iiwid2luZG93IiwiZyIsImJ1aWxkTW9kYWwiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJtb2RhbCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzZXR0aW5ncyIsInN0eWxlIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImhhc0Nsb3NlQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJhcHBlbmRDaGlsZCIsImhhc092ZXJsYXkiLCJvdmVybGF5IiwidGl0bGUiLCJjb250ZW50IiwiaW5pdGlhbGl6ZUV2ZW50cyIsImNsb3NlIiwidHJhbnNpdGlvbkVuZCIsImVsIiwiV2Via2l0VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwicmVtb3ZlRWxlbWVudCIsIm9iaiIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsIk1vZGFsIiwibW9kYWxTZXR0aW5ncyIsImlzRml4ZWQiLCJsaW5rU2VsZWN0b3IiLCJzZWxmIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJsaW5rcyIsIm9wZW4iLCJwcm90b3R5cGUiLCJjYWxsIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiaGFzQ2xhc3MiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm1hdGNoIiwiYWRkIiwicmVtb3ZlIiwic3RyaW5nIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwYXJlbnROb2RlIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxpQkFBbUIsV0F3RHJCLFFBQVNDLEdBQW9CQyxHQUMzQixHQUFJQyxHQUFXLEVBQ1hDLEVBQU9GLEVBQUVHLGNBQ1RDLEVBQVNGLEVBQUtHLGlCQUFpQixtQkFDL0JDLEVBQWlCQyxTQUFTQyxlQUFlTixFQUFLTyxhQUFhLGlCQUMzREgsS0FDRkEsRUFBZUksVUFBWSxHQUU3QixLQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSVAsRUFBT1EsT0FBUUQsSUFBSyxDQUN0QyxHQUFJRSxHQUFhVCxFQUFPTyxHQUFHRixhQUFhLGtCQUN4QyxJQUFJSSxFQUFZLENBQ2RDLFlBQVlWLEVBQU9PLEdBQUksU0FDdkJFLEVBQWFBLEVBQVdFLE1BQU0sSUFFOUIsS0FBSyxHQUREQyxJQUFXLEVBQ05DLEVBQUksRUFBR0QsR0FBWUMsRUFBSUosRUFBV0QsT0FBUUssSUFBSyxDQUN0RCxHQUFJQyxH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QVVuQyxRQUFRLGdCQUFpQixJQUV6RVAsS0FBS21ELFFBQVF4QixpQkFBaUI2QixJQUFpQixXQUM3Q0ksRUFBY1EsRUFBS2pCLGNBZ0V6QmhCO0FDOUlGLFFBQVMyQyxVQUFTckIsRUFBSWYsR0FDcEIsTUFBSWUsR0FBR3NCLFVBQ0V0QixFQUFHc0IsVUFBVUMsU0FBU3RDLEtBRXBCZSxFQUFHZixVQUFVdUMsTUFBTSxHQUFJakUsUUFBTyxVQUFZMEIsRUFBWSxZQUduRSxRQUFTekMsVUFBU3dELEVBQUlmLEdBQ2hCZSxFQUFHc0IsVUFDTHRCLEVBQUdzQixVQUFVRyxJQUFJeEMsR0FDVG9DLFNBQVNyQixFQUFJZixLQUFZZSxFQUFHZixXQUFhLElBQU1BLEdBRzNELFFBQVN0RCxhQUFZcUUsRUFBSWYsR0FDdkIsR0FBSWUsRUFBR3NCLFVBQ0x0QixFQUFHc0IsVUFBVUksT0FBT3pDLE9BQ2pCLElBQUlvQyxTQUFTckIsRUFBSWYsR0FBWSxDQUNoQyxHQUFJM0IsR0FBTSxHQUFJQyxRQUFPLFVBQVkwQixFQUFZLFVBQzdDZSxHQUFHZixVQUFVZSxFQUFHZixVQUFVbkMsUUFBUVEsRUFBSyxNQUszQyxRQUFTWixpQkFBZ0JpRixHQUNyQixNQUFPQSxHQUFPQyxPQUFPLEdBQUdDLGNBQWdCRixFQUFPdkYsTUFBTSxHQUl6RCxRQUFTK0QsZUFBY0gsR0FDakJBLEdBQ0ZBLEVBQUc4QixXQUFXeEIsWUFBWU4iLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZXBlbmRzIG9uIHV0aWxzLmpzXG52YXIgX0Zvcm1WYWxpZGF0aW9uID0gKGZ1bmN0aW9uIEZvcm1WYWxpZGF0aW9uKCkge1xuICB2YXIgdmFsaWRhdG9yTGlzdCA9IHtcbiAgICAncmVxdWlyZWQnOiB7XG4gICAgICAnZXJyb3InOiAnPGZpZWxkPiBpcyByZXF1aXJlZC4gJyxcbiAgICAgICd2YWxpZGF0b3InOiAgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dCAhPSAnJztcbiAgICAgIH1cbiAgICB9LFxuICAgICdtaW4nOiB7XG4gICAgICAnZXJyb3InOiAnPGZpZWxkPiBjYW5ub3QgYmUgc2hvcnRlciB0aGFuIDwxPiBjaGFyYWN0ZXJzLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5sZW5ndGggPj0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ21heCc6IHtcbiAgICAgICdlcnJvcic6ICc8ZmllbGQ+IGNhbm5vdCBiZSBsb25nZXIgdGhhbiA8MT4gY2hhcmFjdGVycy4gJyxcbiAgICAgICd2YWxpZGF0b3InOiBmdW5jdGlvbiAoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gaW5wdXQubGVuZ3RoIDw9IGxlbmd0aDtcbiAgICAgIH1cbiAgICB9LFxuICAgICd1c2VybmFtZV9jaGFycyc6IHtcbiAgICAgICdlcnJvcic6ICc8ZmllbGQ+IG1heSBvbmx5IGNvbnRhaW4gbGV0dGVycywgbnVtYmVycywgb3IgdGhlc2Ugc3BlY2lhbCBjaGFyYWN0ZXJzOiBfLishKigpLSAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnXltBLVphLXowLTlfLishKigpLV0rJCcpO1xuICAgICAgICByZXR1cm4gcmVnLnRlc3QoaW5wdXQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ25vX3JlcGVhdGVkX3VuZGVyc2NvcmVzJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gbWF5IG5vdCBjb250YWluIHR3byB1bmRlcnNjb3JlcyBpbiBhIHJvdy4gJyxcbiAgICAgICd2YWxpZGF0b3InOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LmluZGV4T2YoJ19fJykgPCAwO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ21hdGNoX3Bhc3N3b3JkJzoge1xuICAgICAgJ2Vycm9yJzogJ1Bhc3N3b3JkcyBtdXN0IG1hdGNoISAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCwgbWF0Y2hfaWQpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1hdGNoX2lkKS52YWx1ZSA9PT0gaW5wdXQ7XG4gICAgICB9XG4gICAgfSxcbiAgICAnZW1haWwnOiB7XG4gICAgICAnZXJyb3InOiAnPGZpZWxkPiBtdXN0IGJlIGEgdmFsaWQgZW1haWwuICcsXG4gICAgICAndmFsaWRhdG9yJzogZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHJldHVybiAvXFxTK0BcXFMrXFwuXFxTKy8udGVzdChpbnB1dCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiBGb3JtVmFsaWRhdGlvbkNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYmluZCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9ybXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgX2Zvcm1TdWJtaXRMaXN0ZW5lcik7IC8vIEVuZCBldmVudCBsaXN0ZW5lclxuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gX2Zvcm1TdWJtaXRMaXN0ZW5lcihlKSB7XG4gICAgdmFyIGVyckNvdW50ID0gMDtcbiAgICB2YXIgZm9ybSA9IGUuY3VycmVudFRhcmdldDtcbiAgICB2YXIgZmllbGRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEnKTtcbiAgICB2YXIgZXJyb3JDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvci1pZCcpKTtcbiAgICBpZiAoZXJyb3JDb250YWluZXIpIHtcbiAgICAgIGVycm9yQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHZhbGlkYXRvcnMgPSBmaWVsZHNbal0uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbGlkYXRvcnMnKTtcbiAgICAgIGlmICh2YWxpZGF0b3JzKSB7XG4gICAgICAgIHJlbW92ZUNsYXNzKGZpZWxkc1tqXSwgJ2Vycm9yJyk7XG4gICAgICAgIHZhbGlkYXRvcnMgPSB2YWxpZGF0b3JzLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgdmFyIG5vRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IG5vRXJyb3JzICYmIGsgPCB2YWxpZGF0b3JzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgdmFyIHBhcmFtcyA9IHZhbGlkYXRvcnNba10uc3BsaXQoXCI6XCIpO1xuICAgICAgICAgIHZhciB2YWxOYW1lID0gcGFyYW1zWzBdO1xuICAgICAgICAgIGlmKCF2YWxpZGF0b3JMaXN0W3ZhbE5hbWVdKSB7XG4gICAgICAgICAgICB0aHJvdyBcIkludmFsaWQgdmFsaWRhdG9yIHR5cGU6IFwiICsgdmFsTmFtZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBbaW5wdXQsIHAxLCBwMiwgLi4uXVxuICAgICAgICAgIHBhcmFtcyA9IFtmaWVsZHNbal0udmFsdWVdLmNvbmNhdChwYXJhbXMuc2xpY2UoMSkpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB2YWxpZGF0aW9uIGZhaWxzXG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3JMaXN0W3ZhbE5hbWVdLnZhbGlkYXRvci5hcHBseSh0aGlzLCBwYXJhbXMpKSB7XG4gICAgICAgICAgICBhZGRDbGFzcyhmaWVsZHNbal0sICdlcnJvcicpO1xuICAgICAgICAgICAgdmFyIGZpZWxkID0gY2FwaXRhbGl6ZUZpcnN0KGZpZWxkc1tqXS5uYW1lKTtcbiAgICAgICAgICAgIHZhciBlcnIgPSB2YWxpZGF0b3JMaXN0W3ZhbE5hbWVdLmVycm9yLnJlcGxhY2UoJzxmaWVsZD4nLCBmaWVsZCk7XG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMTsgbCA8IHBhcmFtcy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICBlcnIgPSBlcnIucmVwbGFjZSgnPCcgKyBsICsgJz4nLCBwYXJhbXNbbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyQ291bnQrKztcbiAgICAgICAgICAgIG5vRXJyb3JzID0gZmFsc2U7XG4gICAgICAgICAgICBlcnJvckNvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxwIGNsYXNzPVwiZXJyb3JcIj4nICsgZXJyICsgJzwvcD4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyQ291bnQgPiAwKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59KCkpO1xuXG52YXIgRm9ybVZhbGlkYXRpb24gPSBuZXcgX0Zvcm1WYWxpZGF0aW9uKCk7XG4iLCJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZpeE5hdmJhcik7XG5cbiAgLy8gRm9ybSBWYWxpZGF0aW9uXG4gIEZvcm1WYWxpZGF0aW9uLmJpbmQoJy52YWxpZGF0ZWQtZm9ybScpO1xufSk7XG5cbi8vIE1ha2UgbmF2aWdhdGlvbiBiYXIgc3RheSBhdCB0aGUgdG9wXG5mdW5jdGlvbiBmaXhOYXZiYXIgKCkge1xuICB2YXIgdG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYW5uZXJcIikub2Zmc2V0SGVpZ2h0O1xuICBpZiAoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPiB0b3AgfHxcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID4gdG9wKSB7XG4gICAgYWRkQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXZiYXJcIiksIFwiZml4ZWRcIik7XG4gIH0gZWxzZSB7XG4gICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXZiYXJcIiksIFwiZml4ZWRcIik7XG4gIH1cbn1cbiIsIi8qXG4gKiBBIHNpbXBseSBsaWJyYXJ5IGZvciBhIEphdmFTY3JpcHQgbW9kYWwgd2l0aCBubyBkZXBlbmRlbmNpZXMuICBcbiAqL1xuKGZ1bmN0aW9uIChnKSB7XG4gIGcuTW9kYWwgPSBmdW5jdGlvbiAobW9kYWxTZXR0aW5ncykge1xuICAgIC8vIEEgcmVmZXJlbmNlIHRvIHRoZSBtb2RhbCBwaWVjZXMgaW4gdGhlIGRvbVxuICAgIHRoaXMubW9kYWwgPSBudWxsO1xuICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5jbG9zZUJ1dHRvbiA9IG51bGw7XG5cbiAgICAvLyBJbml0aWFsaXplZCB0byBhbGwgb2YgdGhlIGRlZmF1bHRzIGZvciB0aGlzIHRoaW5nIVxuICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICBjbGFzc05hbWU6IFwiem9vbVwiLFxuICAgICAgaGFzQ2xvc2VCdXR0b246IHRydWUsXG4gICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgdGl0bGU6IG51bGwsXG4gICAgICBtYXhXaWR0aDogODAwLFxuICAgICAgbWluV2lkdGg6IDIwMCxcbiAgICAgIGhhc092ZXJsYXk6IHRydWUsXG4gICAgICBpc0ZpeGVkOiB0cnVlLFxuICAgICAgbGlua1NlbGVjdG9yOiBudWxsXG4gICAgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGlmIChtb2RhbFNldHRpbmdzICYmIHR5cGVvZiBtb2RhbFNldHRpbmdzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5zZXR0aW5ncykge1xuICAgICAgICBpZiAobW9kYWxTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgdGhpcy5zZXR0aW5nc1trZXldID0gbW9kYWxTZXR0aW5nc1trZXldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9IHRoaXMuc2V0dGluZ3MuY29udGVudDtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZW50LmlubmVySFRNTCkge1xuICAgICAgY29udGVudCA9IGNvbnRlbnQuaW5uZXJIVE1MO1xuICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLnNldHRpbmdzLmNvbnRlbnQpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5saW5rU2VsZWN0b3IgIT09IG51bGwpIHtcbiAgICAgIHZhciBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5saW5rU2VsZWN0b3IpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZWxmLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgIGJ1aWxkTW9kYWwuY2FsbCh0aGlzKTtcbiAgICBpbml0aWFsaXplRXZlbnRzLmNhbGwodGhpcyk7XG5cbiAgICAvLyBGb3IgYW5pbWF0aW9uc1xuICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMubW9kYWwpLmhlaWdodDtcblxuICAgIHRoaXMubW9kYWwuY2xhc3NOYW1lICs9IHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0ID9cbiAgICAgIFwiIG1vZGFsLWFjdGl2ZSBtb2RhbC1hbmNob3JlZFwiIDogXCIgbW9kYWwtYWN0aXZlXCI7XG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSArPSBcIiBtb2RhbC1hY3RpdmVcIjtcbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMubW9kYWwuY2xhc3NOYW1lID0gdGhpcy5tb2RhbC5jbGFzc05hbWUucmVwbGFjZShcIiBtb2RhbC1hY3RpdmVcIiwgXCJcIik7XG5cbiAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVFbGVtZW50KHNlbGYubW9kYWwpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSA9IHRoaXMub3ZlcmxheS5jbGFzc05hbWUucmVwbGFjZShcIiBtb2RhbC1hY3RpdmVcIiwgXCJcIik7XG5cbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVFbGVtZW50KHNlbGYub3ZlcmxheSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZE1vZGFsICgpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgPSBcIm1vZGFsIFwiICsgdGhpcy5zZXR0aW5ncy5jbGFzc05hbWU7XG4gICAgdGhpcy5tb2RhbC5zdHlsZS5taW5XaWR0aCA9IHRoaXMuc2V0dGluZ3MubWluV2lkdGggKyBcInB4XCI7XG4gICAgdGhpcy5tb2RhbC5zdHlsZS5tYXhXaWR0aCA9IHRoaXMuc2V0dGluZ3MubWF4V2lkdGggKyBcInB4XCI7XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oYXNDbG9zZUJ1dHRvbiA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uLmNsYXNzTmFtZSA9IFwibW9kYWwtY2xvc2UgbW9kYWwtY2xvc2UtYnV0dG9uXCI7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uLmlubmVySFRNTCA9IFwiw5dcIjtcbiAgICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGhpcy5jbG9zZUJ1dHRvbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGFzT3ZlcmxheSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5vdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMub3ZlcmxheS5jbGFzc05hbWUgPSBcIm1vZGFsLW92ZXJsYXkgXCIgKyB0aGlzLnNldHRpbmdzLmNsYXNzTmFtZTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudGl0bGUgIT09IG51bGwpIHtcbiAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgIHRpdGxlLmNsYXNzTmFtZSA9IFwibW9kYWwtdGl0bGVcIjtcbiAgICAgIHRpdGxlLmlubmVySFRNTCA9IHRoaXMuc2V0dGluZ3MudGl0bGU7XG4gICAgICB0aGlzLm1vZGFsLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVudC5jbGFzc05hbWUgPSBcIm1vZGFsLWNvbnRlbnRcIjtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IHRoaXMuc2V0dGluZ3MuY29udGVudDtcbiAgICB0aGlzLm1vZGFsLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbCk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgaWYgKHRoaXMuY2xvc2VCdXR0b24pIHtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZCgpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGlmIChlbC5zdHlsZS5XZWJraXRUcmFuc2l0aW9uKSByZXR1cm4gXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCI7XG4gICAgaWYgKGVsLnN0eWxlLk9UcmFuc2l0aW9uKSByZXR1cm4gXCJvVHJhbnNpdGlvbkVuZFwiO1xuICAgIHJldHVybiAndHJhbnNpdGlvbmVuZCc7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVFbGVtZW50IChvYmopIHtcbiAgICBpZiAob2JqLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIG9iai5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG9iaik7XG4gICAgfVxuICB9XG59KHdpbmRvdykpO1xuIiwiLy8gRnJvbSBodHRwOi8vamFrZXRyZW50LmNvbS9wb3N0L2FkZHJlbW92ZS1jbGFzc2VzLXJhdy1qYXZhc2NyaXB0L1xuZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuICBpZiAoZWwuY2xhc3NMaXN0KVxuICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKVxuICBlbHNlXG4gICAgcmV0dXJuICEhZWwuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoJyhcXFxcc3xeKScgKyBjbGFzc05hbWUgKyAnKFxcXFxzfCQpJykpXG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdClcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcbiAgZWxzZSBpZiAoIWhhc0NsYXNzKGVsLCBjbGFzc05hbWUpKSBlbC5jbGFzc05hbWUgKz0gXCIgXCIgKyBjbGFzc05hbWVcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuICBpZiAoZWwuY2xhc3NMaXN0KVxuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKVxuICBlbHNlIGlmIChoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXFxcXHN8XiknICsgY2xhc3NOYW1lICsgJyhcXFxcc3wkKScpXG4gICAgZWwuY2xhc3NOYW1lPWVsLmNsYXNzTmFtZS5yZXBsYWNlKHJlZywgJyAnKVxuICB9XG59XG5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAyNjA2OS9jYXBpdGFsaXplLXRoZS1maXJzdC1sZXR0ZXItb2Ytc3RyaW5nLWluLWphdmFzY3JpcHRcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg4MzA4MzkvamF2YXNjcmlwdC1kb20tcmVtb3ZlLWVsZW1lbnRcbmZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWwpIHtcbiAgaWYgKGVsKSB7XG4gICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
