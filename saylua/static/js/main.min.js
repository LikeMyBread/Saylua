var _FormValidation=function(){function r(r){var t=0,a=r.currentTarget,n=a.querySelectorAll("input, textarea"),o=document.getElementById(a.getAttribute("data-error-id"));o&&(o.innerHTML="");for(var i=0;i<n.length;i++){var l=n[i].getAttribute("data-validators"),c=n[i].getAttribute("data-errors");if(c&&(c=JSON.parse(c)),l){removeClass(n[i],"error"),l=l.split(" ");for(var d=!0,s=0;d&&s<l.length;s++){var u=l[s].split(":"),v=u[0];if(!e[v])throw"Invalid validator type: "+v;var f=n[i].value;if("checkbox"==n[i].type&&(f=n[i].checked),u=[f].concat(u.slice(1)),!e[v].validator.apply(this,u)){addClass(n[i],"error");var m,h=capitalizeFirst(n[i].name);m=c&&v in c?c[v]:e[v].error.replace("<field>",h.replace(/[_-]/g," "));for(var p=1;p<u.length;p++)m=m.replace("<"+p+">",u[p]);t++,d=!1,o.innerHTML+='<p class="error">'+m+"</p>"}}}}return!(t>0)||(r.preventDefault(),!1)}var e={required:{error:"<field> is required. ",validator:function(r){return r}},not_empty:{error:"<field> cannot be only spaces. ",validator:function(r){return/\S/.test(r)}},min:{error:"<field> cannot be shorter than <1> characters. ",validator:function(r,e){return r.length>=e}},max:{error:"<field> cannot be longer than <1> characters. ",validator:function(r,e){return r.length<=e}},username_chars:{error:"<field> may only contain letters, numbers, or these special characters: _.+!*()- ",validator:function(r){var e=new RegExp("^[A-Za-z0-9_.+!*()-]+$");return e.test(r)}},no_repeated_underscores:{error:"<field> may not contain two underscores in a row. ",validator:function(r){return r.indexOf("__")<0}},match_password:{error:"Passwords must match. ",validator:function(r,e){return document.getElementById(e).value===r}},email:{error:"<field> must be a valid email. ",validator:function(r){return/\S+@\S+\.\S+/.test(r)}}};return function(){this.bind=function(e){for(var t=document.querySelectorAll(e),a=0;a<t.length;a++)t[a].addEventListener("submit",r)}}}(),FormValidation=new _FormValidation;
function fixNavbar(e){var t=document.getElementById("banner").offsetHeight;document.body.scrollTop>t||document.documentElement.scrollTop>t?addClass(document.getElementById("navbar"),"fixed"):removeClass(document.getElementById("navbar"),"fixed")}function initializeRightMenu(){function e(){for(var e=0;e<o.length;e++)removeClass(o[e],"active");i.style.display="none",document.body.removeEventListener("click",n,!1)}function t(e){for(var t=0;t<o.length;t++)o[t].getAttribute("data-section")==e?addClass(o[t],"active"):removeClass(o[t],"active");for(var t=0;t<d.length;t++)d[t].id==e?d[t].style.display="block":d[t].style.display="none";i.style.display="block",document.body.addEventListener("click",n)}function n(t){var n=t.target;a.contains(n)||i.contains(n)||e()}for(var a=document.getElementById("navigation-right"),i=document.getElementById("dropdown-right"),o=a.getElementsByClassName("block-link"),d=i.getElementsByClassName("menu"),l=0;l<o.length;l++)o[l].addEventListener("click",function(n){n.preventDefault();var a=n.currentTarget;hasClass(a,"active")?(e(),removeClass(a,"active")):t(a.getAttribute("data-section"))})}window.addEventListener("load",function(){window.addEventListener("scroll",fixNavbar),initializeRightMenu(),FormValidation.bind(".validated-form")});
!function(t){function e(){var t=document.createDocumentFragment();if(this.modal=document.createElement("div"),this.modal.className="modal "+this.settings.className,this.modal.style.minWidth=this.settings.minWidth+"px",this.modal.style.maxWidth=this.settings.maxWidth+"px",this.settings.hasCloseButton===!0&&(this.closeButton=document.createElement("button"),this.closeButton.className="modal-close modal-close-button",this.closeButton.innerHTML="Ã—",this.modal.appendChild(this.closeButton)),this.settings.hasOverlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="modal-overlay "+this.settings.className,t.appendChild(this.overlay)),null!==this.settings.title){var e=document.createElement("h2");e.className="modal-title",e.innerHTML=this.settings.title,this.modal.appendChild(e)}var i=document.createElement("div");i.className="modal-content",i.innerHTML=this.settings.content,this.modal.appendChild(i),t.appendChild(this.modal),document.body.appendChild(t)}function i(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function s(){var t=document.createElement("div");return t.style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend"}function n(t){t.parentElement&&t.parentElement.removeChild(t)}t.Modal=function(t){this.modal=null,this.overlay=null,this.closeButton=null,this.settings={className:"zoom",hasCloseButton:!0,content:"",title:null,maxWidth:800,minWidth:200,hasOverlay:!0,isFixed:!0,linkSelector:null};var e=this;if(t&&"object"==typeof t)for(var i in this.settings)t.hasOwnProperty(i)&&(this.settings[i]=t[i]);var s=this.settings.content;if(s&&s.innerHTML&&(s=s.innerHTML,n(this.settings.content),this.settings.content=s),null!==this.settings.linkSelector)for(var l=document.querySelectorAll(this.settings.linkSelector),a=0;a<l.length;a++)l[a].addEventListener("click",function(t){t.preventDefault(),e.open()})},Modal.prototype.open=function(){e.call(this),i.call(this),window.getComputedStyle(this.modal).height,this.modal.className+=this.modal.offsetHeight>window.innerHeight?" modal-active modal-anchored":" modal-active",this.overlay&&(this.overlay.className+=" modal-active")},Modal.prototype.close=function(){var t=this;this.modal.className=this.modal.className.replace(" modal-active",""),this.modal.addEventListener(s(),function(){n(t.modal)}),this.overlay&&(this.overlay.className=this.overlay.className.replace(" modal-active",""),this.overlay.addEventListener(s(),function(){n(t.overlay)}))}}(window);
function hasClass(s,a){return s.classList?s.classList.contains(a):!!s.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}function addClass(s,a){s.classList?s.classList.add(a):hasClass(s,a)||(s.className+=" "+a)}function removeClass(s,a){if(s.classList)s.classList.remove(a);else if(hasClass(s,a)){var e=new RegExp("(\\s|^)"+a+"(\\s|$)");s.className=s.className.replace(e," ")}}function capitalizeFirst(s){return s.charAt(0).toUpperCase()+s.slice(1)}function removeElement(s){s&&s.parentNode.removeChild(s)}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZvcm1WYWxpZGF0ZS5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInV0aWxzLmpzIl0sIm5hbWVzIjpbIl9Gb3JtVmFsaWRhdGlvbiIsIl9mb3JtU3VibWl0TGlzdGVuZXIiLCJlIiwiZXJyQ291bnQiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsImZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnJvckNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJqIiwibGVuZ3RoIiwidmFsaWRhdG9ycyIsImVycm9ycyIsIkpTT04iLCJwYXJzZSIsInJlbW92ZUNsYXNzIiwic3BsaXQiLCJub0Vycm9ycyIsImsiLCJwYXJhbXMiLCJ2YWxpZGF0b3JOYW1lIiwidmFsaWRhdG9yTGlzdCIsInZhbHVlIiwidHlwZSIsImNoZWNrZWQiLCJjb25jYXQiLCJzbGljZSIsInZhbGlkYXRvciIsImFwcGx5IiwidGhpcyIsImFkZENsYXNzIiwiZXJyIiwiZmllbGQiLCJjYXBpdGFsaXplRmlyc3QiLCJuYW1lIiwiZXJyb3IiLCJyZXBsYWNlIiwibCIsInByZXZlbnREZWZhdWx0IiwicmVxdWlyZWQiLCJpbnB1dCIsIm5vdF9lbXB0eSIsInRlc3QiLCJtaW4iLCJtYXgiLCJ1c2VybmFtZV9jaGFycyIsInJlZyIsIlJlZ0V4cCIsIm5vX3JlcGVhdGVkX3VuZGVyc2NvcmVzIiwiaW5kZXhPZiIsIm1hdGNoX3Bhc3N3b3JkIiwibWF0Y2hfaWQiLCJlbWFpbCIsImJpbmQiLCJzZWxlY3RvciIsImZvcm1zIiwiaSIsImFkZEV2ZW50TGlzdGVuZXIiLCJGb3JtVmFsaWRhdGlvbiIsImZpeE5hdmJhciIsInRvcCIsIm9mZnNldEhlaWdodCIsImJvZHkiLCJzY3JvbGxUb3AiLCJkb2N1bWVudEVsZW1lbnQiLCJpbml0aWFsaXplUmlnaHRNZW51IiwiaGlkZU1lbnUiLCJsaW5rcyIsIm1lbnUiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VPbk91dHNpZGVDbGljayIsInNob3dNZW51Iiwic2VjdGlvbiIsInNlY3Rpb25zIiwiaWQiLCJ0YXJnZXQiLCJuYXZpZ2F0aW9uIiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGluayIsImhhc0NsYXNzIiwid2luZG93IiwiZyIsImJ1aWxkTW9kYWwiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJtb2RhbCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzZXR0aW5ncyIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJoYXNDbG9zZUJ1dHRvbiIsImNsb3NlQnV0dG9uIiwiYXBwZW5kQ2hpbGQiLCJoYXNPdmVybGF5Iiwib3ZlcmxheSIsInRpdGxlIiwiY29udGVudCIsImluaXRpYWxpemVFdmVudHMiLCJjbG9zZSIsInRyYW5zaXRpb25FbmQiLCJlbCIsIldlYmtpdFRyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsInJlbW92ZUVsZW1lbnQiLCJvYmoiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJNb2RhbCIsIm1vZGFsU2V0dGluZ3MiLCJpc0ZpeGVkIiwibGlua1NlbGVjdG9yIiwic2VsZiIsImtleSIsImhhc093blByb3BlcnR5Iiwib3BlbiIsInByb3RvdHlwZSIsImNhbGwiLCJnZXRDb21wdXRlZFN0eWxlIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGFzc0xpc3QiLCJtYXRjaCIsImFkZCIsInJlbW92ZSIsInN0cmluZyIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwicGFyZW50Tm9kZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsaUJBQW1CLFdBOERyQixRQUFTQyxHQUFvQkMsR0FDM0IsR0FBSUMsR0FBVyxFQUNYQyxFQUFPRixFQUFFRyxjQUNUQyxFQUFTRixFQUFLRyxpQkFBaUIsbUJBQy9CQyxFQUFpQkMsU0FBU0MsZUFBZU4sRUFBS08sYUFBYSxpQkFDM0RILEtBQ0ZBLEVBQWVJLFVBQVksR0FFN0IsS0FBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlQLEVBQU9RLE9BQVFELElBQUssQ0FDdEMsR0FBSUUsR0FBYVQsRUFBT08sR0FBR0YsYUFBYSxtQkFDcENLLEVBQVNWLEVBQU9PLEdBQUdGLGFBQWEsY0FJcEMsSUFISUssSUFDRkEsRUFBU0MsS0FBS0MsTUFBTUYsSUFFbEJELEVBQVksQ0FDZEksWUFBWWIsRUFBT08sR0FBSSxTQUN2QkUsRUFBYUEsRUFBV0ssTUFBTSxJQUU5QixLQUFLLEdBRERDLElBQVcsRUFDTkMsRUFBSSxFQUFHRCxHQUFZQyxFQUFJUCxFQUFXRCxPQUFRUSxJQUFLLENBQ3RELEdBQUlDLEdBQVNSLEVBQVdPLEdBQUdGLE1BQU0sS0FDN0JJLEVBQWdCRCxFQUFPLEVBQzNCLEtBQUlFLEVBQWNELEdBQ2hCLEtBQU0sMkJBQTZCQSxDQUdyQyxJQUFJRSxHQUFRcEIsRUFBT08sR0FBR2EsS0FTdEIsSUFSc0IsWUFBbEJwQixFQUFPTyxHQUFHYyxPQUNaRCxFQUFRcEIsRUFBT08sR0FBR2UsU0FJcEJMLEdBQVVHLEdBQU9HLE9BQU9OLEVBQU9PLE1BQU0sS0FHaENMLEVBQWNELEdBQWVPLFVBQVVDLE1BQU1DLEtBQU1WLEdBQVMsQ0FDL0RXLFNBQVM1QixFQUFPTyxHQUFJLFFBQ3BCLElBQ0lzQixHQURBQyxFQUFRQyxnQkFBZ0IvQixFQUFPTyxHQUFHeUIsS0FHcENILEdBREVuQixHQUFVUSxJQUFpQlIsR0FDdkJBLEVBQU9RLEdBRVBDLEVBQWNELEdBQWVlLE1BQU1DLFFBQVEsVUFBV0osRUFBTUksUUFBUSxRQUFTLEtBRXJGLEtBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJbEIsRUFBT1QsT0FBUTJCLElBQ2pDTixFQUFNQSxFQUFJSyxRQUFRLElBQU1DLEVBQUksSUFBS2xCLEVBQU9rQixHQUUxQ3RDLEtBQ0FrQixHQUFXLEVBQ1hiLEVBQWVJLFdBQWEsb0JBQXNCdUIsRUFBTSxVQUtoRSxRQUFJaEMsRUFBVyxLQUNiRCxFQUFFd0Msa0JBQ0ssR0FwSFgsR0FBSWpCLElBQ0ZrQixVQUNFSixNQUFTLHdCQUNUUixVQUFjLFNBQVVhLEdBQ3RCLE1BQU9BLEtBR1hDLFdBQ0VOLE1BQVMsa0NBQ1RSLFVBQWMsU0FBVWEsR0FDdEIsTUFBTyxLQUFLRSxLQUFLRixLQUdyQkcsS0FDRVIsTUFBUyxrREFDVFIsVUFBYSxTQUFVYSxFQUFPOUIsR0FDNUIsTUFBTzhCLEdBQU05QixRQUFVQSxJQUczQmtDLEtBQ0VULE1BQVMsaURBQ1RSLFVBQWEsU0FBVWEsRUFBTzlCLEdBQzVCLE1BQU84QixHQUFNOUIsUUFBVUEsSUFHM0JtQyxnQkFDRVYsTUFBUyxvRkFDVFIsVUFBYSxTQUFVYSxHQUNyQixHQUFJTSxHQUFNLEdBQUlDLFFBQU8seUJBQ3JCLE9BQU9ELEdBQUlKLEtBQUtGLEtBR3BCUSx5QkFDRWIsTUFBUyxxREFDVFIsVUFBYSxTQUFVYSxHQUNyQixNQUFPQSxHQUFNUyxRQUFRLE1BQVEsSUFHakNDLGdCQUNFZixNQUFTLHlCQUNUUixVQUFhLFNBQVVhLEVBQU9XLEdBQzVCLE1BQU85QyxVQUFTQyxlQUFlNkMsR0FBVTdCLFFBQVVrQixJQUd2RFksT0FDRWpCLE1BQVMsa0NBQ1RSLFVBQWEsU0FBVWEsR0FDckIsTUFBTyxlQUFlRSxLQUFLRixLQUtqQyxPQUFPLFlBQ0xYLEtBQUt3QixLQUFPLFNBQVNDLEdBRW5CLElBQUssR0FEREMsR0FBUWxELFNBQVNGLGlCQUFpQm1ELEdBQzdCRSxFQUFJLEVBQUdBLEVBQUlELEVBQU03QyxPQUFROEMsSUFDaENELEVBQU1DLEdBQUdDLGlCQUFpQixTQUFVNUQsUUFrRXhDNkQsZUFBaUIsR0FBSTlEO0FDakh6QixRQUFTK0QsV0FBVTdELEdBQ2pCLEdBQUk4RCxHQUFNdkQsU0FBU0MsZUFBZSxVQUFVdUQsWUFDeEN4RCxVQUFTeUQsS0FBS0MsVUFBWUgsR0FDNUJ2RCxTQUFTMkQsZ0JBQWdCRCxVQUFZSCxFQUNyQzlCLFNBQVN6QixTQUFTQyxlQUFlLFVBQVcsU0FFNUNTLFlBQVlWLFNBQVNDLGVBQWUsVUFBVyxTQUluRCxRQUFTMkQsdUJBc0JQLFFBQVNDLEtBQ1AsSUFBSyxHQUFJVixHQUFJLEVBQUdBLEVBQUlXLEVBQU16RCxPQUFROEMsSUFDaEN6QyxZQUFZb0QsRUFBTVgsR0FBSSxTQUV4QlksR0FBS0MsTUFBTUMsUUFBVSxPQUNyQmpFLFNBQVN5RCxLQUFLUyxvQkFBb0IsUUFBU0MsR0FBcUIsR0FHbEUsUUFBU0MsR0FBU0MsR0FDaEIsSUFBSyxHQUFJbEIsR0FBSSxFQUFHQSxFQUFJVyxFQUFNekQsT0FBUThDLElBQzVCVyxFQUFNWCxHQUFHakQsYUFBYSxpQkFBbUJtRSxFQUMzQzVDLFNBQVNxQyxFQUFNWCxHQUFJLFVBRW5CekMsWUFBWW9ELEVBQU1YLEdBQUksU0FHMUIsS0FBSyxHQUFJQSxHQUFJLEVBQUdBLEVBQUltQixFQUFTakUsT0FBUThDLElBQy9CbUIsRUFBU25CLEdBQUdvQixJQUFNRixFQUNwQkMsRUFBU25CLEdBQUdhLE1BQU1DLFFBQVUsUUFFNUJLLEVBQVNuQixHQUFHYSxNQUFNQyxRQUFVLE1BR2hDRixHQUFLQyxNQUFNQyxRQUFVLFFBQ3JCakUsU0FBU3lELEtBQUtMLGlCQUFpQixRQUFTZSxHQUcxQyxRQUFTQSxHQUFxQjFFLEdBQzVCLEdBQUkrRSxHQUFTL0UsRUFBRStFLE1BQ1ZDLEdBQVdDLFNBQVNGLElBQVlULEVBQUtXLFNBQVNGLElBQ2pEWCxJQTdDSixJQUFLLEdBTkRZLEdBQWF6RSxTQUFTQyxlQUFlLG9CQUNyQzhELEVBQU8vRCxTQUFTQyxlQUFlLGtCQUMvQjZELEVBQVFXLEVBQVdFLHVCQUF1QixjQUMxQ0wsRUFBV1AsRUFBS1ksdUJBQXVCLFFBR2xDeEIsRUFBSSxFQUFHQSxFQUFJVyxFQUFNekQsT0FBUThDLElBQ2hDVyxFQUFNWCxHQUFHQyxpQkFBaUIsUUFBUyxTQUF5QjNELEdBQzFEQSxFQUFFd0MsZ0JBQ0YsSUFBSTJDLEdBQU9uRixFQUFFRyxhQUVUaUYsVUFBU0QsRUFBTSxXQUVqQmYsSUFDQW5ELFlBQVlrRSxFQUFNLFdBRWxCUixFQUFTUSxFQUFLMUUsYUFBYSxtQkF0Q25DNEUsT0FBTzFCLGlCQUFpQixPQUFRLFdBQzlCMEIsT0FBTzFCLGlCQUFpQixTQUFVRSxXQUdsQ00sc0JBR0FQLGVBQWVMLEtBQUs7Q0NKckIsU0FBVStCLEdBaUZULFFBQVNDLEtBQ1AsR0FBSUMsR0FBV2pGLFNBQVNrRix3QkFtQnhCLElBbEJBMUQsS0FBSzJELE1BQVFuRixTQUFTb0YsY0FBYyxPQUNwQzVELEtBQUsyRCxNQUFNRSxVQUFZLFNBQVc3RCxLQUFLOEQsU0FBU0QsVUFDaEQ3RCxLQUFLMkQsTUFBTW5CLE1BQU11QixTQUFXL0QsS0FBSzhELFNBQVNDLFNBQVcsS0FDckQvRCxLQUFLMkQsTUFBTW5CLE1BQU13QixTQUFXaEUsS0FBSzhELFNBQVNFLFNBQVcsS0FFakRoRSxLQUFLOEQsU0FBU0csa0JBQW1CLElBQ25DakUsS0FBS2tFLFlBQWMxRixTQUFTb0YsY0FBYyxVQUMxQzVELEtBQUtrRSxZQUFZTCxVQUFZLGlDQUM3QjdELEtBQUtrRSxZQUFZdkYsVUFBWSxJQUM3QnFCLEtBQUsyRCxNQUFNUSxZQUFZbkUsS0FBS2tFLGNBRzFCbEUsS0FBSzhELFNBQVNNLGNBQWUsSUFDL0JwRSxLQUFLcUUsUUFBVTdGLFNBQVNvRixjQUFjLE9BQ3RDNUQsS0FBS3FFLFFBQVFSLFVBQVksaUJBQW1CN0QsS0FBSzhELFNBQVNELFVBQzFESixFQUFTVSxZQUFZbkUsS0FBS3FFLFVBR0EsT0FBeEJyRSxLQUFLOEQsU0FBU1EsTUFBZ0IsQ0FDaEMsR0FBSUEsR0FBUTlGLFNBQVNvRixjQUFjLEtBQ25DVSxHQUFNVCxVQUFZLGNBQ2xCUyxFQUFNM0YsVUFBWXFCLEtBQUs4RCxTQUFTUSxNQUNoQ3RFLEtBQUsyRCxNQUFNUSxZQUFZRyxHQUd6QixHQUFJQyxHQUFVL0YsU0FBU29GLGNBQWMsTUFDckNXLEdBQVFWLFVBQVksZ0JBQ3BCVSxFQUFRNUYsVUFBWXFCLEtBQUs4RCxTQUFTUyxRQUNsQ3ZFLEtBQUsyRCxNQUFNUSxZQUFZSSxHQUV2QmQsRUFBU1UsWUFBWW5FLEtBQUsyRCxPQUUxQm5GLFNBQVN5RCxLQUFLa0MsWUFBWVYsR0FHNUIsUUFBU2UsS0FDSHhFLEtBQUtrRSxhQUNQbEUsS0FBS2tFLFlBQVl0QyxpQkFBaUIsUUFBUzVCLEtBQUt5RSxNQUFNakQsS0FBS3hCLE9BR3pEQSxLQUFLcUUsU0FDUHJFLEtBQUtxRSxRQUFRekMsaUJBQWlCLFFBQVM1QixLQUFLeUUsTUFBTWpELEtBQUt4QixPQUkzRCxRQUFTMEUsS0FDUCxHQUFJQyxHQUFLbkcsU0FBU29GLGNBQWMsTUFDaEMsT0FBSWUsR0FBR25DLE1BQU1vQyxpQkFBeUIsc0JBQ2xDRCxFQUFHbkMsTUFBTXFDLFlBQW9CLGlCQUMxQixnQkFHVCxRQUFTQyxHQUFlQyxHQUNsQkEsRUFBSUMsZUFDTkQsRUFBSUMsY0FBY0MsWUFBWUYsR0F4SWxDeEIsRUFBRTJCLE1BQVEsU0FBVUMsR0FFbEJuRixLQUFLMkQsTUFBUSxLQUNiM0QsS0FBS3FFLFFBQVUsS0FDZnJFLEtBQUtrRSxZQUFjLEtBR25CbEUsS0FBSzhELFVBQ0hELFVBQVcsT0FDWEksZ0JBQWdCLEVBQ2hCTSxRQUFTLEdBQ1RELE1BQU8sS0FDUE4sU0FBVSxJQUNWRCxTQUFVLElBQ1ZLLFlBQVksRUFDWmdCLFNBQVMsRUFDVEMsYUFBYyxLQUdoQixJQUFJQyxHQUFPdEYsSUFFWCxJQUFJbUYsR0FBMEMsZ0JBQWxCQSxHQUMxQixJQUFLLEdBQUlJLEtBQU92RixNQUFLOEQsU0FDZnFCLEVBQWNLLGVBQWVELEtBQy9CdkYsS0FBSzhELFNBQVN5QixHQUFPSixFQUFjSSxHQUt6QyxJQUFJaEIsR0FBVXZFLEtBQUs4RCxTQUFTUyxPQU81QixJQU5JQSxHQUFXQSxFQUFRNUYsWUFDckI0RixFQUFVQSxFQUFRNUYsVUFDbEJtRyxFQUFjOUUsS0FBSzhELFNBQVNTLFNBQzVCdkUsS0FBSzhELFNBQVNTLFFBQVVBLEdBR1MsT0FBL0J2RSxLQUFLOEQsU0FBU3VCLGFBR2hCLElBQUssR0FGRC9DLEdBQVE5RCxTQUFTRixpQkFBaUIwQixLQUFLOEQsU0FBU3VCLGNBRTNDMUQsRUFBSSxFQUFHQSxFQUFJVyxFQUFNekQsT0FBUThDLElBQ2hDVyxFQUFNWCxHQUFHQyxpQkFBaUIsUUFBUyxTQUFVM0QsR0FDM0NBLEVBQUV3QyxpQkFDRjZFLEVBQUtHLFVBTWJQLE1BQU1RLFVBQVVELEtBQU8sV0FDckJqQyxFQUFXbUMsS0FBSzNGLE1BQ2hCd0UsRUFBaUJtQixLQUFLM0YsTUFHdEJzRCxPQUFPc0MsaUJBQWlCNUYsS0FBSzJELE9BQU9rQyxPQUVwQzdGLEtBQUsyRCxNQUFNRSxXQUFhN0QsS0FBSzJELE1BQU0zQixhQUFlc0IsT0FBT3dDLFlBQ3ZELCtCQUFpQyxnQkFDL0I5RixLQUFLcUUsVUFDUHJFLEtBQUtxRSxRQUFRUixXQUFhLGtCQUk5QnFCLE1BQU1RLFVBQVVqQixNQUFRLFdBQ3RCLEdBQUlhLEdBQU90RixJQUVYQSxNQUFLMkQsTUFBTUUsVUFBWTdELEtBQUsyRCxNQUFNRSxVQUFVdEQsUUFBUSxnQkFBaUIsSUFFckVQLEtBQUsyRCxNQUFNL0IsaUJBQWlCOEMsSUFBaUIsV0FDM0NJLEVBQWNRLEVBQUszQixTQUdqQjNELEtBQUtxRSxVQUNQckUsS0FBS3FFLFFBQVFSLFVBQVk3RCxLQUFLcUUsUUFBUVIsVUFBVXRELFFBQVEsZ0JBQWlCLElBRXpFUCxLQUFLcUUsUUFBUXpDLGlCQUFpQjhDLElBQWlCLFdBQzdDSSxFQUFjUSxFQUFLakIsY0FnRXpCZjtBQzlJRixRQUFTRCxVQUFTc0IsRUFBSWQsR0FDcEIsTUFBSWMsR0FBR29CLFVBQ0VwQixFQUFHb0IsVUFBVTdDLFNBQVNXLEtBRXBCYyxFQUFHZCxVQUFVbUMsTUFBTSxHQUFJOUUsUUFBTyxVQUFZMkMsRUFBWSxZQUduRSxRQUFTNUQsVUFBUzBFLEVBQUlkLEdBQ2hCYyxFQUFHb0IsVUFDTHBCLEVBQUdvQixVQUFVRSxJQUFJcEMsR0FDVFIsU0FBU3NCLEVBQUlkLEtBQVljLEVBQUdkLFdBQWEsSUFBTUEsR0FHM0QsUUFBUzNFLGFBQVl5RixFQUFJZCxHQUN2QixHQUFJYyxFQUFHb0IsVUFDTHBCLEVBQUdvQixVQUFVRyxPQUFPckMsT0FDakIsSUFBSVIsU0FBU3NCLEVBQUlkLEdBQVksQ0FDaEMsR0FBSTVDLEdBQU0sR0FBSUMsUUFBTyxVQUFZMkMsRUFBWSxVQUM3Q2MsR0FBR2QsVUFBVWMsRUFBR2QsVUFBVXRELFFBQVFVLEVBQUssTUFLM0MsUUFBU2IsaUJBQWdCK0YsR0FDckIsTUFBT0EsR0FBT0MsT0FBTyxHQUFHQyxjQUFnQkYsRUFBT3RHLE1BQU0sR0FJekQsUUFBU2lGLGVBQWNILEdBQ2pCQSxHQUNGQSxFQUFHMkIsV0FBV3JCLFlBQVlOIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVwZW5kcyBvbiB1dGlscy5qc1xudmFyIF9Gb3JtVmFsaWRhdGlvbiA9IChmdW5jdGlvbiBGb3JtVmFsaWRhdGlvbigpIHtcbiAgdmFyIHZhbGlkYXRvckxpc3QgPSB7XG4gICAgJ3JlcXVpcmVkJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gaXMgcmVxdWlyZWQuICcsXG4gICAgICAndmFsaWRhdG9yJzogIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbm90X2VtcHR5Jzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gY2Fubm90IGJlIG9ubHkgc3BhY2VzLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6ICBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIC9cXFMvLnRlc3QoaW5wdXQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ21pbic6IHtcbiAgICAgICdlcnJvcic6ICc8ZmllbGQ+IGNhbm5vdCBiZSBzaG9ydGVyIHRoYW4gPDE+IGNoYXJhY3RlcnMuICcsXG4gICAgICAndmFsaWRhdG9yJzogZnVuY3Rpb24gKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0Lmxlbmd0aCA+PSBsZW5ndGg7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbWF4Jzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gY2Fubm90IGJlIGxvbmdlciB0aGFuIDwxPiBjaGFyYWN0ZXJzLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5sZW5ndGggPD0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3VzZXJuYW1lX2NoYXJzJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gbWF5IG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBvciB0aGVzZSBzcGVjaWFsIGNoYXJhY3RlcnM6IF8uKyEqKCktICcsXG4gICAgICAndmFsaWRhdG9yJzogZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCdeW0EtWmEtejAtOV8uKyEqKCktXSskJyk7XG4gICAgICAgIHJldHVybiByZWcudGVzdChpbnB1dCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbm9fcmVwZWF0ZWRfdW5kZXJzY29yZXMnOiB7XG4gICAgICAnZXJyb3InOiAnPGZpZWxkPiBtYXkgbm90IGNvbnRhaW4gdHdvIHVuZGVyc2NvcmVzIGluIGEgcm93LiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQuaW5kZXhPZignX18nKSA8IDA7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbWF0Y2hfcGFzc3dvcmQnOiB7XG4gICAgICAnZXJyb3InOiAnUGFzc3dvcmRzIG11c3QgbWF0Y2guICcsXG4gICAgICAndmFsaWRhdG9yJzogZnVuY3Rpb24gKGlucHV0LCBtYXRjaF9pZCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hfaWQpLnZhbHVlID09PSBpbnB1dDtcbiAgICAgIH1cbiAgICB9LFxuICAgICdlbWFpbCc6IHtcbiAgICAgICdlcnJvcic6ICc8ZmllbGQ+IG11c3QgYmUgYSB2YWxpZCBlbWFpbC4gJyxcbiAgICAgICd2YWxpZGF0b3InOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIC9cXFMrQFxcUytcXC5cXFMrLy50ZXN0KGlucHV0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIEZvcm1WYWxpZGF0aW9uQ29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5iaW5kID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgIHZhciBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3Jtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBfZm9ybVN1Ym1pdExpc3RlbmVyKTsgLy8gRW5kIGV2ZW50IGxpc3RlbmVyXG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZm9ybVN1Ym1pdExpc3RlbmVyKGUpIHtcbiAgICB2YXIgZXJyQ291bnQgPSAwO1xuICAgIHZhciBmb3JtID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIHZhciBmaWVsZHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpO1xuICAgIHZhciBlcnJvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm0uZ2V0QXR0cmlidXRlKCdkYXRhLWVycm9yLWlkJykpO1xuICAgIGlmIChlcnJvckNvbnRhaW5lcikge1xuICAgICAgZXJyb3JDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgdmFsaWRhdG9ycyA9IGZpZWxkc1tqXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdG9ycycpO1xuICAgICAgdmFyIGVycm9ycyA9IGZpZWxkc1tqXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3JzJyk7XG4gICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgIGVycm9ycyA9IEpTT04ucGFyc2UoZXJyb3JzKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWxpZGF0b3JzKSB7XG4gICAgICAgIHJlbW92ZUNsYXNzKGZpZWxkc1tqXSwgJ2Vycm9yJyk7XG4gICAgICAgIHZhbGlkYXRvcnMgPSB2YWxpZGF0b3JzLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgdmFyIG5vRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IG5vRXJyb3JzICYmIGsgPCB2YWxpZGF0b3JzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgdmFyIHBhcmFtcyA9IHZhbGlkYXRvcnNba10uc3BsaXQoXCI6XCIpO1xuICAgICAgICAgIHZhciB2YWxpZGF0b3JOYW1lID0gcGFyYW1zWzBdO1xuICAgICAgICAgIGlmKCF2YWxpZGF0b3JMaXN0W3ZhbGlkYXRvck5hbWVdKSB7XG4gICAgICAgICAgICB0aHJvdyBcIkludmFsaWQgdmFsaWRhdG9yIHR5cGU6IFwiICsgdmFsaWRhdG9yTmFtZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdmFsdWUgPSBmaWVsZHNbal0udmFsdWU7XG4gICAgICAgICAgaWYgKGZpZWxkc1tqXS50eXBlID09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gZmllbGRzW2pdLmNoZWNrZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gW2lucHV0LCBwMSwgcDIsIC4uLl1cbiAgICAgICAgICBwYXJhbXMgPSBbdmFsdWVdLmNvbmNhdChwYXJhbXMuc2xpY2UoMSkpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB2YWxpZGF0aW9uIGZhaWxzXG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3JMaXN0W3ZhbGlkYXRvck5hbWVdLnZhbGlkYXRvci5hcHBseSh0aGlzLCBwYXJhbXMpKSB7XG4gICAgICAgICAgICBhZGRDbGFzcyhmaWVsZHNbal0sICdlcnJvcicpO1xuICAgICAgICAgICAgdmFyIGZpZWxkID0gY2FwaXRhbGl6ZUZpcnN0KGZpZWxkc1tqXS5uYW1lKTtcbiAgICAgICAgICAgIHZhciBlcnI7XG4gICAgICAgICAgICBpZiAoZXJyb3JzICYmIHZhbGlkYXRvck5hbWUgaW4gZXJyb3JzKSB7XG4gICAgICAgICAgICAgIGVyciA9IGVycm9yc1t2YWxpZGF0b3JOYW1lXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVyciA9IHZhbGlkYXRvckxpc3RbdmFsaWRhdG9yTmFtZV0uZXJyb3IucmVwbGFjZSgnPGZpZWxkPicsIGZpZWxkLnJlcGxhY2UoL1tfLV0vZywgJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMTsgbCA8IHBhcmFtcy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICBlcnIgPSBlcnIucmVwbGFjZSgnPCcgKyBsICsgJz4nLCBwYXJhbXNbbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyQ291bnQrKztcbiAgICAgICAgICAgIG5vRXJyb3JzID0gZmFsc2U7XG4gICAgICAgICAgICBlcnJvckNvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxwIGNsYXNzPVwiZXJyb3JcIj4nICsgZXJyICsgJzwvcD4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyQ291bnQgPiAwKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59KCkpO1xuXG52YXIgRm9ybVZhbGlkYXRpb24gPSBuZXcgX0Zvcm1WYWxpZGF0aW9uKCk7XG4iLCJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZpeE5hdmJhcik7XG5cbiAgLy8gR2V0IGFsbCBvZiB0aGUgcmlnaHQgbmF2YmFyIGxpbmtzIGFuZCBiaW5kIGNsaWNrIGV2ZW50cyB0byB0aGVtXG4gIGluaXRpYWxpemVSaWdodE1lbnUoKTtcblxuICAvLyBGb3JtIFZhbGlkYXRpb25cbiAgRm9ybVZhbGlkYXRpb24uYmluZCgnLnZhbGlkYXRlZC1mb3JtJyk7XG59KTtcblxuLy8gTWFrZSBuYXZpZ2F0aW9uIGJhciBzdGF5IGF0IHRoZSB0b3BcbmZ1bmN0aW9uIGZpeE5hdmJhcihlKSB7XG4gIHZhciB0b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbm5lclwiKS5vZmZzZXRIZWlnaHQ7XG4gIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IHRvcCB8fFxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiB0b3ApIHtcbiAgICBhZGRDbGFzcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdmJhclwiKSwgXCJmaXhlZFwiKTtcbiAgfSBlbHNlIHtcbiAgICByZW1vdmVDbGFzcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdmJhclwiKSwgXCJmaXhlZFwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUmlnaHRNZW51KCkge1xuICB2YXIgbmF2aWdhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0aW9uLXJpZ2h0Jyk7XG4gIHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3Bkb3duLXJpZ2h0Jyk7XG4gIHZhciBsaW5rcyA9IG5hdmlnYXRpb24uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmxvY2stbGluaycpO1xuICB2YXIgc2VjdGlvbnMgPSBtZW51LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21lbnUnKTtcblxuICAvLyBGb3IgdGhyb3VnaCByaWdodCBuYXZpZ2F0aW9uIGxpbmtzIGFuZCBhdHRhY2ggbGlzdGVuZXJzIHRvIHRoZW1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xuICAgIGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gY2hhbmdlUmlnaHRNZW51KGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBsaW5rID0gZS5jdXJyZW50VGFyZ2V0O1xuXG4gICAgICBpZiAoaGFzQ2xhc3MobGluaywgJ2FjdGl2ZScpKSB7XG4gICAgICAgIC8vIENsaWNraW5nIG9uIGEgc2VsZWN0ZWQgaWNvbiByZW1vdmVzIHRoZSBtZW51XG4gICAgICAgIGhpZGVNZW51KCk7XG4gICAgICAgIHJlbW92ZUNsYXNzKGxpbmssICdhY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dNZW51KGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLXNlY3Rpb24nKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlTWVudSgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZW1vdmVDbGFzcyhsaW5rc1tpXSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlT25PdXRzaWRlQ2xpY2ssIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dNZW51KHNlY3Rpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlua3NbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXNlY3Rpb24nKSA9PSBzZWN0aW9uKSB7XG4gICAgICAgIGFkZENsYXNzKGxpbmtzW2ldLCAnYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVDbGFzcyhsaW5rc1tpXSwgJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2VjdGlvbnNbaV0uaWQgPT0gc2VjdGlvbikge1xuICAgICAgICBzZWN0aW9uc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlY3Rpb25zW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfVxuICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlT25PdXRzaWRlQ2xpY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VPbk91dHNpZGVDbGljayAoZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBpZiAoIW5hdmlnYXRpb24uY29udGFpbnModGFyZ2V0KSAmJiAhbWVudS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICBoaWRlTWVudSgpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIEEgc2ltcGx5IGxpYnJhcnkgZm9yIGEgSmF2YVNjcmlwdCBtb2RhbCB3aXRoIG5vIGRlcGVuZGVuY2llcy4gIFxuICovXG4oZnVuY3Rpb24gKGcpIHtcbiAgZy5Nb2RhbCA9IGZ1bmN0aW9uIChtb2RhbFNldHRpbmdzKSB7XG4gICAgLy8gQSByZWZlcmVuY2UgdG8gdGhlIG1vZGFsIHBpZWNlcyBpbiB0aGUgZG9tXG4gICAgdGhpcy5tb2RhbCA9IG51bGw7XG4gICAgdGhpcy5vdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gbnVsbDtcblxuICAgIC8vIEluaXRpYWxpemVkIHRvIGFsbCBvZiB0aGUgZGVmYXVsdHMgZm9yIHRoaXMgdGhpbmchXG4gICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgIGNsYXNzTmFtZTogXCJ6b29tXCIsXG4gICAgICBoYXNDbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICB0aXRsZTogbnVsbCxcbiAgICAgIG1heFdpZHRoOiA4MDAsXG4gICAgICBtaW5XaWR0aDogMjAwLFxuICAgICAgaGFzT3ZlcmxheTogdHJ1ZSxcbiAgICAgIGlzRml4ZWQ6IHRydWUsXG4gICAgICBsaW5rU2VsZWN0b3I6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKG1vZGFsU2V0dGluZ3MgJiYgdHlwZW9mIG1vZGFsU2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnNldHRpbmdzKSB7XG4gICAgICAgIGlmIChtb2RhbFNldHRpbmdzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICB0aGlzLnNldHRpbmdzW2tleV0gPSBtb2RhbFNldHRpbmdzW2tleV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb250ZW50ID0gdGhpcy5zZXR0aW5ncy5jb250ZW50O1xuICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQuaW5uZXJIVE1MKSB7XG4gICAgICBjb250ZW50ID0gY29udGVudC5pbm5lckhUTUw7XG4gICAgICByZW1vdmVFbGVtZW50KHRoaXMuc2V0dGluZ3MuY29udGVudCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmxpbmtTZWxlY3RvciAhPT0gbnVsbCkge1xuICAgICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLmxpbmtTZWxlY3Rvcik7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgYnVpbGRNb2RhbC5jYWxsKHRoaXMpO1xuICAgIGluaXRpYWxpemVFdmVudHMuY2FsbCh0aGlzKTtcblxuICAgIC8vIEZvciBhbmltYXRpb25zXG4gICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5tb2RhbCkuaGVpZ2h0O1xuXG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgKz0gdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgP1xuICAgICAgXCIgbW9kYWwtYWN0aXZlIG1vZGFsLWFuY2hvcmVkXCIgOiBcIiBtb2RhbC1hY3RpdmVcIjtcbiAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NOYW1lICs9IFwiIG1vZGFsLWFjdGl2ZVwiO1xuICAgIH1cbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgPSB0aGlzLm1vZGFsLmNsYXNzTmFtZS5yZXBsYWNlKFwiIG1vZGFsLWFjdGl2ZVwiLCBcIlwiKTtcblxuICAgIHRoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZUVsZW1lbnQoc2VsZi5tb2RhbCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NOYW1lID0gdGhpcy5vdmVybGF5LmNsYXNzTmFtZS5yZXBsYWNlKFwiIG1vZGFsLWFjdGl2ZVwiLCBcIlwiKTtcblxuICAgICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUVsZW1lbnQoc2VsZi5vdmVybGF5KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkTW9kYWwgKCkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTmFtZSA9IFwibW9kYWwgXCIgKyB0aGlzLnNldHRpbmdzLmNsYXNzTmFtZTtcbiAgICB0aGlzLm1vZGFsLnN0eWxlLm1pbldpZHRoID0gdGhpcy5zZXR0aW5ncy5taW5XaWR0aCArIFwicHhcIjtcbiAgICB0aGlzLm1vZGFsLnN0eWxlLm1heFdpZHRoID0gdGhpcy5zZXR0aW5ncy5tYXhXaWR0aCArIFwicHhcIjtcblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhhc0Nsb3NlQnV0dG9uID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJtb2RhbC1jbG9zZSBtb2RhbC1jbG9zZS1idXR0b25cIjtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCLDl1wiO1xuICAgICAgdGhpcy5tb2RhbC5hcHBlbmRDaGlsZCh0aGlzLmNsb3NlQnV0dG9uKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oYXNPdmVybGF5ID09PSB0cnVlKSB7XG4gICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSA9IFwibW9kYWwtb3ZlcmxheSBcIiArIHRoaXMuc2V0dGluZ3MuY2xhc3NOYW1lO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy50aXRsZSAhPT0gbnVsbCkge1xuICAgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJtb2RhbC10aXRsZVwiO1xuICAgICAgdGl0bGUuaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5ncy50aXRsZTtcbiAgICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgIH1cblxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9IFwibW9kYWwtY29udGVudFwiO1xuICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5ncy5jb250ZW50O1xuICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsKTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcbiAgICBpZiAodGhpcy5jbG9zZUJ1dHRvbikge1xuICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaWYgKGVsLnN0eWxlLldlYmtpdFRyYW5zaXRpb24pIHJldHVybiBcIndlYmtpdFRyYW5zaXRpb25FbmRcIjtcbiAgICBpZiAoZWwuc3R5bGUuT1RyYW5zaXRpb24pIHJldHVybiBcIm9UcmFuc2l0aW9uRW5kXCI7XG4gICAgcmV0dXJuICd0cmFuc2l0aW9uZW5kJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQgKG9iaikge1xuICAgIGlmIChvYmoucGFyZW50RWxlbWVudCkge1xuICAgICAgb2JqLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQob2JqKTtcbiAgICB9XG4gIH1cbn0od2luZG93KSk7XG4iLCIvLyBGcm9tIGh0dHA6Ly9qYWtldHJlbnQuY29tL3Bvc3QvYWRkcmVtb3ZlLWNsYXNzZXMtcmF3LWphdmFzY3JpcHQvXG5mdW5jdGlvbiBoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpXG4gICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpXG4gIGVsc2VcbiAgICByZXR1cm4gISFlbC5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIGNsYXNzTmFtZSArICcoXFxcXHN8JCknKSlcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuICBpZiAoZWwuY2xhc3NMaXN0KVxuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKVxuICBlbHNlIGlmICghaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkpIGVsLmNsYXNzTmFtZSArPSBcIiBcIiArIGNsYXNzTmFtZVxufVxuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpXG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gIGVsc2UgaWYgKGhhc0NsYXNzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScgKyBjbGFzc05hbWUgKyAnKFxcXFxzfCQpJylcbiAgICBlbC5jbGFzc05hbWU9ZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpXG4gIH1cbn1cblxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDI2MDY5L2NhcGl0YWxpemUtdGhlLWZpcnN0LWxldHRlci1vZi1zdHJpbmctaW4tamF2YXNjcmlwdFxuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG59XG5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODgzMDgzOS9qYXZhc2NyaXB0LWRvbS1yZW1vdmUtZWxlbWVudFxuZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbCkge1xuICBpZiAoZWwpIHtcbiAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
