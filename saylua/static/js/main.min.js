var _FormValidation=function(){function r(r){var t=0,a=r.currentTarget,n=a.querySelectorAll("input, textarea"),o=document.getElementById(a.getAttribute("data-error-id"));o&&(o.innerHTML="");for(var i=0;i<n.length;i++){var l=n[i].getAttribute("data-validators"),c=n[i].getAttribute("data-errors");if(c&&(c=JSON.parse(c)),l){removeClass(n[i],"error"),l=l.split(" ");for(var d=!0,u=0;d&&u<l.length;u++){var s=l[u].split(":"),v=s[0];if(!e[v])throw"Invalid validator type: "+v;var f=n[i].value;if("checkbox"==n[i].type&&(f=n[i].checked),s=[f].concat(s.slice(1)),!e[v].validator.apply(this,s)){addClass(n[i],"error");var m,h=capitalizeFirst(n[i].name);m=c&&v in c?c[v]:e[v].error.replace("<field>",h.replace(/[_-]/g," "));for(var p=1;p<s.length;p++)m=m.replace("<"+p+">",s[p]);t++,d=!1,o.innerHTML+='<p class="error">'+m+"</p>"}}}}return t>0?(r.preventDefault(),!1):!0}var e={required:{error:"<field> is required. ",validator:function(r){return r}},not_empty:{error:"<field> cannot be only spaces. ",validator:function(r){return/\S/.test(r)}},min:{error:"<field> cannot be shorter than <1> characters. ",validator:function(r,e){return r.length>=e}},max:{error:"<field> cannot be longer than <1> characters. ",validator:function(r,e){return r.length<=e}},username_chars:{error:"<field> may only contain letters, numbers, underscores, or hyphens. ",validator:function(r){var e=new RegExp("^[A-Za-z0-9_-]+$");return e.test(r)}},match_password:{error:"Passwords must match. ",validator:function(r,e){return document.getElementById(e).value===r}},email:{error:"<field> must be a valid email. ",validator:function(r){return/\S+@\S+\.\S+/.test(r)}}};return function(){this.bind=function(e){for(var t=document.querySelectorAll(e),a=0;a<t.length;a++)t[a].addEventListener("submit",r)}}}(),FormValidation=new _FormValidation;
function fixNavbar(e){var t=document.getElementById("banner").offsetHeight,n=document.getElementById("sidebar-container");document.body.scrollTop>t||document.documentElement.scrollTop>t?(addClass(document.getElementById("navbar"),"fixed"),n&&addClass(n,"fixed")):(removeClass(document.getElementById("navbar"),"fixed"),n&&removeClass(n,"fixed"))}function initializeRightMenu(){function e(){for(var e=0;e<d.length;e++)removeClass(d[e],"active");swapClass(i,"shown","hidden"),document.body.removeEventListener("click",n,!1)}function t(e){for(var t=0;t<d.length;t++)d[t].getAttribute("data-section")==e?addClass(d[t],"active"):removeClass(d[t],"active");for(var t=0;t<o.length;t++)o[t].id==e?o[t].style.display="block":o[t].style.display="none";swapClass(i,"hidden","shown"),document.body.addEventListener("click",n)}function n(t){var n=t.target;a.contains(n)||i.contains(n)||e()}for(var a=document.getElementById("navigation-right"),i=document.getElementById("dropdown-right"),d=a.getElementsByClassName("block-link"),o=i.getElementsByClassName("menu"),s=0;s<d.length;s++)d[s].addEventListener("click",function(n){n.preventDefault();var a=n.currentTarget;hasClass(a,"active")?(e(),removeClass(a,"active")):t(a.getAttribute("data-section"))})}window.addEventListener("load",function(){window.addEventListener("scroll",fixNavbar),initializeRightMenu(),FormValidation.bind(".validated-form")});
!function(t){function e(){var t=document.createDocumentFragment();if(this.modal=document.createElement("div"),this.modal.className="modal "+this.settings.className,this.modal.style.minWidth=this.settings.minWidth+"px",this.modal.style.maxWidth=this.settings.maxWidth+"px",this.settings.hasCloseButton===!0&&(this.closeButton=document.createElement("button"),this.closeButton.className="modal-close modal-close-button",this.closeButton.innerHTML="Ã—",this.modal.appendChild(this.closeButton)),this.settings.hasOverlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="modal-overlay "+this.settings.className,t.appendChild(this.overlay)),null!==this.settings.title){var e=document.createElement("h2");e.className="modal-title",e.innerHTML=this.settings.title,this.modal.appendChild(e)}var i=document.createElement("div");i.className="modal-content",i.innerHTML=this.settings.content,this.modal.appendChild(i),t.appendChild(this.modal),document.body.appendChild(t)}function i(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function s(){var t=document.createElement("div");return t.style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend"}function n(t){t.parentElement&&t.parentElement.removeChild(t)}t.Modal=function(t){this.modal=null,this.overlay=null,this.closeButton=null,this.settings={className:"zoom",hasCloseButton:!0,content:"",title:null,maxWidth:800,minWidth:200,hasOverlay:!0,isFixed:!0,linkSelector:null};var e=this;if(t&&"object"==typeof t)for(var i in this.settings)t.hasOwnProperty(i)&&(this.settings[i]=t[i]);var s=this.settings.content;if(s&&s.innerHTML&&(s=s.innerHTML,n(this.settings.content),this.settings.content=s),null!==this.settings.linkSelector)for(var l=document.querySelectorAll(this.settings.linkSelector),a=0;a<l.length;a++)l[a].addEventListener("click",function(t){t.preventDefault(),e.open()})},Modal.prototype.open=function(){e.call(this),i.call(this),window.getComputedStyle(this.modal).height,this.modal.className+=this.modal.offsetHeight>window.innerHeight?" modal-active modal-anchored":" modal-active",this.overlay&&(this.overlay.className+=" modal-active")},Modal.prototype.close=function(){var t=this;this.modal.className=this.modal.className.replace(" modal-active",""),this.modal.addEventListener(s(),function(){n(t.modal)}),this.overlay&&(this.overlay.className=this.overlay.className.replace(" modal-active",""),this.overlay.addEventListener(s(),function(){n(t.overlay)}))}}(window);
function hasClass(s,e){return s.classList?s.classList.contains(e):!!s.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function addClass(s,e){s.classList?s.classList.add(e):hasClass(s,e)||(s.className+=" "+e)}function removeClass(s,e){if(s.classList)s.classList.remove(e);else if(hasClass(s,e)){var a=new RegExp("(\\s|^)"+e+"(\\s|$)");s.className=s.className.replace(a," ")}}function swapClass(s,e,a){removeClass(s,e),addClass(s,a)}function capitalizeFirst(s){return s.charAt(0).toUpperCase()+s.slice(1)}function removeElement(s){s&&s.parentNode.removeChild(s)}function arrayRemove(s,e){for(var a=s.length;a--;)if(s[a]===e)return s.splice(a,1),!0;return!1}Array.prototype.includes||(Array.prototype.includes=function(s){"use strict";var e=Object(this),a=parseInt(e.length,10)||0;if(0===a)return!1;var r,t=parseInt(arguments[1],10)||0;t>=0?r=t:(r=a+t,0>r&&(r=0));for(var n;a>r;){if(n=e[r],s===n||s!==s&&n!==n)return!0;r++}return!1});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZvcm1WYWxpZGF0ZS5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInV0aWxzLmpzIl0sIm5hbWVzIjpbIl9Gb3JtVmFsaWRhdGlvbiIsIl9mb3JtU3VibWl0TGlzdGVuZXIiLCJlIiwiZXJyQ291bnQiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsImZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlcnJvckNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJqIiwibGVuZ3RoIiwidmFsaWRhdG9ycyIsImVycm9ycyIsIkpTT04iLCJwYXJzZSIsInJlbW92ZUNsYXNzIiwic3BsaXQiLCJub0Vycm9ycyIsImsiLCJwYXJhbXMiLCJ2YWxpZGF0b3JOYW1lIiwidmFsaWRhdG9yTGlzdCIsInZhbHVlIiwidHlwZSIsImNoZWNrZWQiLCJjb25jYXQiLCJzbGljZSIsInZhbGlkYXRvciIsImFwcGx5IiwidGhpcyIsImFkZENsYXNzIiwiZXJyIiwiZmllbGQiLCJjYXBpdGFsaXplRmlyc3QiLCJuYW1lIiwiZXJyb3IiLCJyZXBsYWNlIiwibCIsInByZXZlbnREZWZhdWx0IiwicmVxdWlyZWQiLCJpbnB1dCIsIm5vdF9lbXB0eSIsInRlc3QiLCJtaW4iLCJtYXgiLCJ1c2VybmFtZV9jaGFycyIsInJlZyIsIlJlZ0V4cCIsIm1hdGNoX3Bhc3N3b3JkIiwibWF0Y2hfaWQiLCJlbWFpbCIsImJpbmQiLCJzZWxlY3RvciIsImZvcm1zIiwiaSIsImFkZEV2ZW50TGlzdGVuZXIiLCJGb3JtVmFsaWRhdGlvbiIsImZpeE5hdmJhciIsInRvcCIsIm9mZnNldEhlaWdodCIsInNpZGViYXJzIiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsImluaXRpYWxpemVSaWdodE1lbnUiLCJoaWRlTWVudSIsImxpbmtzIiwic3dhcENsYXNzIiwibWVudSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZU9uT3V0c2lkZUNsaWNrIiwic2hvd01lbnUiLCJzZWN0aW9uIiwic2VjdGlvbnMiLCJpZCIsInN0eWxlIiwiZGlzcGxheSIsInRhcmdldCIsIm5hdmlnYXRpb24iLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsaW5rIiwiaGFzQ2xhc3MiLCJ3aW5kb3ciLCJnIiwiYnVpbGRNb2RhbCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIm1vZGFsIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNldHRpbmdzIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImhhc0Nsb3NlQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJhcHBlbmRDaGlsZCIsImhhc092ZXJsYXkiLCJvdmVybGF5IiwidGl0bGUiLCJjb250ZW50IiwiaW5pdGlhbGl6ZUV2ZW50cyIsImNsb3NlIiwidHJhbnNpdGlvbkVuZCIsImVsIiwiV2Via2l0VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwicmVtb3ZlRWxlbWVudCIsIm9iaiIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsIk1vZGFsIiwibW9kYWxTZXR0aW5ncyIsImlzRml4ZWQiLCJsaW5rU2VsZWN0b3IiLCJzZWxmIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJvcGVuIiwicHJvdG90eXBlIiwiY2FsbCIsImdldENvbXB1dGVkU3R5bGUiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImNsYXNzTGlzdCIsIm1hdGNoIiwiYWRkIiwicmVtb3ZlIiwiY2xhc3NBIiwiY2xhc3NCIiwic3RyaW5nIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwYXJlbnROb2RlIiwiYXJyYXlSZW1vdmUiLCJhcnIiLCJpdGVtIiwic3BsaWNlIiwiQXJyYXkiLCJpbmNsdWRlcyIsInNlYXJjaEVsZW1lbnQiLCJPIiwiT2JqZWN0IiwibGVuIiwicGFyc2VJbnQiLCJuIiwiYXJndW1lbnRzIiwiY3VycmVudEVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlB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QUo3SCxHQUFTLENBRWQsR0FEQWlJLEVBQWlCTixFQUFFM0gsR0FDZjBILElBQWtCTyxHQUNsQlAsSUFBa0JBLEdBQWlCTyxJQUFtQkEsRUFDeEQsT0FBTyxDQUVUakksS0FFRixPQUFPIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVwZW5kcyBvbiB1dGlscy5qc1xudmFyIF9Gb3JtVmFsaWRhdGlvbiA9IChmdW5jdGlvbiBGb3JtVmFsaWRhdGlvbigpIHtcbiAgdmFyIHZhbGlkYXRvckxpc3QgPSB7XG4gICAgJ3JlcXVpcmVkJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gaXMgcmVxdWlyZWQuICcsXG4gICAgICAndmFsaWRhdG9yJzogIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbm90X2VtcHR5Jzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gY2Fubm90IGJlIG9ubHkgc3BhY2VzLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6ICBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIC9cXFMvLnRlc3QoaW5wdXQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ21pbic6IHtcbiAgICAgICdlcnJvcic6ICc8ZmllbGQ+IGNhbm5vdCBiZSBzaG9ydGVyIHRoYW4gPDE+IGNoYXJhY3RlcnMuICcsXG4gICAgICAndmFsaWRhdG9yJzogZnVuY3Rpb24gKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0Lmxlbmd0aCA+PSBsZW5ndGg7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbWF4Jzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gY2Fubm90IGJlIGxvbmdlciB0aGFuIDwxPiBjaGFyYWN0ZXJzLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5sZW5ndGggPD0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3VzZXJuYW1lX2NoYXJzJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gbWF5IG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3Jlcywgb3IgaHlwaGVucy4gJyxcbiAgICAgICd2YWxpZGF0b3InOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ15bQS1aYS16MC05Xy1dKyQnKTtcbiAgICAgICAgcmV0dXJuIHJlZy50ZXN0KGlucHV0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgICdtYXRjaF9wYXNzd29yZCc6IHtcbiAgICAgICdlcnJvcic6ICdQYXNzd29yZHMgbXVzdCBtYXRjaC4gJyxcbiAgICAgICd2YWxpZGF0b3InOiBmdW5jdGlvbiAoaW5wdXQsIG1hdGNoX2lkKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXRjaF9pZCkudmFsdWUgPT09IGlucHV0O1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2VtYWlsJzoge1xuICAgICAgJ2Vycm9yJzogJzxmaWVsZD4gbXVzdCBiZSBhIHZhbGlkIGVtYWlsLiAnLFxuICAgICAgJ3ZhbGlkYXRvcic6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gL1xcUytAXFxTK1xcLlxcUysvLnRlc3QoaW5wdXQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gRm9ybVZhbGlkYXRpb25Db25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJpbmQgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgdmFyIGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvcm1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIF9mb3JtU3VibWl0TGlzdGVuZXIpOyAvLyBFbmQgZXZlbnQgbGlzdGVuZXJcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIF9mb3JtU3VibWl0TGlzdGVuZXIoZSkge1xuICAgIHZhciBlcnJDb3VudCA9IDA7XG4gICAgdmFyIGZvcm0gPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdmFyIGZpZWxkcyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHRleHRhcmVhJyk7XG4gICAgdmFyIGVycm9yQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3ItaWQnKSk7XG4gICAgaWYgKGVycm9yQ29udGFpbmVyKSB7XG4gICAgICBlcnJvckNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICB9XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB2YWxpZGF0b3JzID0gZmllbGRzW2pdLmdldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0b3JzJyk7XG4gICAgICB2YXIgZXJyb3JzID0gZmllbGRzW2pdLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvcnMnKTtcbiAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzID0gSlNPTi5wYXJzZShlcnJvcnMpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbGlkYXRvcnMpIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3MoZmllbGRzW2pdLCAnZXJyb3InKTtcbiAgICAgICAgdmFsaWRhdG9ycyA9IHZhbGlkYXRvcnMuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YXIgbm9FcnJvcnMgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgbm9FcnJvcnMgJiYgayA8IHZhbGlkYXRvcnMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICB2YXIgcGFyYW1zID0gdmFsaWRhdG9yc1trXS5zcGxpdChcIjpcIik7XG4gICAgICAgICAgdmFyIHZhbGlkYXRvck5hbWUgPSBwYXJhbXNbMF07XG4gICAgICAgICAgaWYoIXZhbGlkYXRvckxpc3RbdmFsaWRhdG9yTmFtZV0pIHtcbiAgICAgICAgICAgIHRocm93IFwiSW52YWxpZCB2YWxpZGF0b3IgdHlwZTogXCIgKyB2YWxpZGF0b3JOYW1lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB2YWx1ZSA9IGZpZWxkc1tqXS52YWx1ZTtcbiAgICAgICAgICBpZiAoZmllbGRzW2pdLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgdmFsdWUgPSBmaWVsZHNbal0uY2hlY2tlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBbaW5wdXQsIHAxLCBwMiwgLi4uXVxuICAgICAgICAgIHBhcmFtcyA9IFt2YWx1ZV0uY29uY2F0KHBhcmFtcy5zbGljZSgxKSk7XG5cbiAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHZhbGlkYXRpb24gZmFpbHNcbiAgICAgICAgICBpZiAoIXZhbGlkYXRvckxpc3RbdmFsaWRhdG9yTmFtZV0udmFsaWRhdG9yLmFwcGx5KHRoaXMsIHBhcmFtcykpIHtcbiAgICAgICAgICAgIGFkZENsYXNzKGZpZWxkc1tqXSwgJ2Vycm9yJyk7XG4gICAgICAgICAgICB2YXIgZmllbGQgPSBjYXBpdGFsaXplRmlyc3QoZmllbGRzW2pdLm5hbWUpO1xuICAgICAgICAgICAgdmFyIGVycjtcbiAgICAgICAgICAgIGlmIChlcnJvcnMgJiYgdmFsaWRhdG9yTmFtZSBpbiBlcnJvcnMpIHtcbiAgICAgICAgICAgICAgZXJyID0gZXJyb3JzW3ZhbGlkYXRvck5hbWVdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXJyID0gdmFsaWRhdG9yTGlzdFt2YWxpZGF0b3JOYW1lXS5lcnJvci5yZXBsYWNlKCc8ZmllbGQ+JywgZmllbGQucmVwbGFjZSgvW18tXS9nLCAnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAxOyBsIDwgcGFyYW1zLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAgIGVyciA9IGVyci5yZXBsYWNlKCc8JyArIGwgKyAnPicsIHBhcmFtc1tsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlcnJDb3VudCsrO1xuICAgICAgICAgICAgbm9FcnJvcnMgPSBmYWxzZTtcbiAgICAgICAgICAgIGVycm9yQ29udGFpbmVyLmlubmVySFRNTCArPSAnPHAgY2xhc3M9XCJlcnJvclwiPicgKyBlcnIgKyAnPC9wPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlcnJDb3VudCA+IDApIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn0oKSk7XG5cbnZhciBGb3JtVmFsaWRhdGlvbiA9IG5ldyBfRm9ybVZhbGlkYXRpb24oKTtcbiIsIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZml4TmF2YmFyKTtcblxuICAvLyBHZXQgYWxsIG9mIHRoZSByaWdodCBuYXZiYXIgbGlua3MgYW5kIGJpbmQgY2xpY2sgZXZlbnRzIHRvIHRoZW1cbiAgaW5pdGlhbGl6ZVJpZ2h0TWVudSgpO1xuXG4gIC8vIEZvcm0gVmFsaWRhdGlvblxuICBGb3JtVmFsaWRhdGlvbi5iaW5kKCcudmFsaWRhdGVkLWZvcm0nKTtcbn0pO1xuXG4vLyBNYWtlIG5hdmlnYXRpb24gYmFyIHN0YXkgYXQgdGhlIHRvcFxuZnVuY3Rpb24gZml4TmF2YmFyKGUpIHtcbiAgdmFyIHRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFubmVyXCIpLm9mZnNldEhlaWdodDtcbiAgdmFyIHNpZGViYXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyLWNvbnRhaW5lclwiKTtcbiAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gdG9wIHx8XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IHRvcCkge1xuICAgIGFkZENsYXNzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2YmFyXCIpLCBcImZpeGVkXCIpO1xuICAgIGlmIChzaWRlYmFycykge1xuICAgICAgYWRkQ2xhc3Moc2lkZWJhcnMsIFwiZml4ZWRcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2YmFyXCIpLCBcImZpeGVkXCIpO1xuICAgIGlmIChzaWRlYmFycykge1xuICAgICAgcmVtb3ZlQ2xhc3Moc2lkZWJhcnMsIFwiZml4ZWRcIik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVSaWdodE1lbnUoKSB7XG4gIHZhciBuYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmlnYXRpb24tcmlnaHQnKTtcbiAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcGRvd24tcmlnaHQnKTtcbiAgdmFyIGxpbmtzID0gbmF2aWdhdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdibG9jay1saW5rJyk7XG4gIHZhciBzZWN0aW9ucyA9IG1lbnUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVudScpO1xuXG4gIC8vIEZvciB0aHJvdWdoIHJpZ2h0IG5hdmlnYXRpb24gbGlua3MgYW5kIGF0dGFjaCBsaXN0ZW5lcnMgdG8gdGhlbVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBjaGFuZ2VSaWdodE1lbnUoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIGxpbmsgPSBlLmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgIGlmIChoYXNDbGFzcyhsaW5rLCAnYWN0aXZlJykpIHtcbiAgICAgICAgLy8gQ2xpY2tpbmcgb24gYSBzZWxlY3RlZCBpY29uIHJlbW92ZXMgdGhlIG1lbnVcbiAgICAgICAgaGlkZU1lbnUoKTtcbiAgICAgICAgcmVtb3ZlQ2xhc3MobGluaywgJ2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd01lbnUobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VjdGlvbicpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVNZW51KCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlbW92ZUNsYXNzKGxpbmtzW2ldLCAnYWN0aXZlJyk7XG4gICAgfVxuICAgIHN3YXBDbGFzcyhtZW51LCAnc2hvd24nLCAnaGlkZGVuJyk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlT25PdXRzaWRlQ2xpY2ssIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dNZW51KHNlY3Rpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlua3NbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXNlY3Rpb24nKSA9PSBzZWN0aW9uKSB7XG4gICAgICAgIGFkZENsYXNzKGxpbmtzW2ldLCAnYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVDbGFzcyhsaW5rc1tpXSwgJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2VjdGlvbnNbaV0uaWQgPT0gc2VjdGlvbikge1xuICAgICAgICBzZWN0aW9uc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlY3Rpb25zW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfVxuICAgIHN3YXBDbGFzcyhtZW51LCAnaGlkZGVuJywgJ3Nob3duJyk7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlT25PdXRzaWRlQ2xpY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VPbk91dHNpZGVDbGljayAoZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBpZiAoIW5hdmlnYXRpb24uY29udGFpbnModGFyZ2V0KSAmJiAhbWVudS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICBoaWRlTWVudSgpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIEEgc2ltcGx5IGxpYnJhcnkgZm9yIGEgSmF2YVNjcmlwdCBtb2RhbCB3aXRoIG5vIGRlcGVuZGVuY2llcy5cbiAqL1xuKGZ1bmN0aW9uIChnKSB7XG4gIGcuTW9kYWwgPSBmdW5jdGlvbiAobW9kYWxTZXR0aW5ncykge1xuICAgIC8vIEEgcmVmZXJlbmNlIHRvIHRoZSBtb2RhbCBwaWVjZXMgaW4gdGhlIGRvbVxuICAgIHRoaXMubW9kYWwgPSBudWxsO1xuICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5jbG9zZUJ1dHRvbiA9IG51bGw7XG5cbiAgICAvLyBJbml0aWFsaXplZCB0byBhbGwgb2YgdGhlIGRlZmF1bHRzIGZvciB0aGlzIHRoaW5nIVxuICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICBjbGFzc05hbWU6IFwiem9vbVwiLFxuICAgICAgaGFzQ2xvc2VCdXR0b246IHRydWUsXG4gICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgdGl0bGU6IG51bGwsXG4gICAgICBtYXhXaWR0aDogODAwLFxuICAgICAgbWluV2lkdGg6IDIwMCxcbiAgICAgIGhhc092ZXJsYXk6IHRydWUsXG4gICAgICBpc0ZpeGVkOiB0cnVlLFxuICAgICAgbGlua1NlbGVjdG9yOiBudWxsXG4gICAgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGlmIChtb2RhbFNldHRpbmdzICYmIHR5cGVvZiBtb2RhbFNldHRpbmdzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5zZXR0aW5ncykge1xuICAgICAgICBpZiAobW9kYWxTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgdGhpcy5zZXR0aW5nc1trZXldID0gbW9kYWxTZXR0aW5nc1trZXldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9IHRoaXMuc2V0dGluZ3MuY29udGVudDtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZW50LmlubmVySFRNTCkge1xuICAgICAgY29udGVudCA9IGNvbnRlbnQuaW5uZXJIVE1MO1xuICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLnNldHRpbmdzLmNvbnRlbnQpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5saW5rU2VsZWN0b3IgIT09IG51bGwpIHtcbiAgICAgIHZhciBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5saW5rU2VsZWN0b3IpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZWxmLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgIGJ1aWxkTW9kYWwuY2FsbCh0aGlzKTtcbiAgICBpbml0aWFsaXplRXZlbnRzLmNhbGwodGhpcyk7XG5cbiAgICAvLyBGb3IgYW5pbWF0aW9uc1xuICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMubW9kYWwpLmhlaWdodDtcblxuICAgIHRoaXMubW9kYWwuY2xhc3NOYW1lICs9IHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0ID9cbiAgICAgIFwiIG1vZGFsLWFjdGl2ZSBtb2RhbC1hbmNob3JlZFwiIDogXCIgbW9kYWwtYWN0aXZlXCI7XG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSArPSBcIiBtb2RhbC1hY3RpdmVcIjtcbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMubW9kYWwuY2xhc3NOYW1lID0gdGhpcy5tb2RhbC5jbGFzc05hbWUucmVwbGFjZShcIiBtb2RhbC1hY3RpdmVcIiwgXCJcIik7XG5cbiAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVFbGVtZW50KHNlbGYubW9kYWwpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSA9IHRoaXMub3ZlcmxheS5jbGFzc05hbWUucmVwbGFjZShcIiBtb2RhbC1hY3RpdmVcIiwgXCJcIik7XG5cbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVFbGVtZW50KHNlbGYub3ZlcmxheSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZE1vZGFsICgpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgPSBcIm1vZGFsIFwiICsgdGhpcy5zZXR0aW5ncy5jbGFzc05hbWU7XG4gICAgdGhpcy5tb2RhbC5zdHlsZS5taW5XaWR0aCA9IHRoaXMuc2V0dGluZ3MubWluV2lkdGggKyBcInB4XCI7XG4gICAgdGhpcy5tb2RhbC5zdHlsZS5tYXhXaWR0aCA9IHRoaXMuc2V0dGluZ3MubWF4V2lkdGggKyBcInB4XCI7XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oYXNDbG9zZUJ1dHRvbiA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uLmNsYXNzTmFtZSA9IFwibW9kYWwtY2xvc2UgbW9kYWwtY2xvc2UtYnV0dG9uXCI7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uLmlubmVySFRNTCA9IFwiw5dcIjtcbiAgICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGhpcy5jbG9zZUJ1dHRvbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGFzT3ZlcmxheSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5vdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMub3ZlcmxheS5jbGFzc05hbWUgPSBcIm1vZGFsLW92ZXJsYXkgXCIgKyB0aGlzLnNldHRpbmdzLmNsYXNzTmFtZTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudGl0bGUgIT09IG51bGwpIHtcbiAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgIHRpdGxlLmNsYXNzTmFtZSA9IFwibW9kYWwtdGl0bGVcIjtcbiAgICAgIHRpdGxlLmlubmVySFRNTCA9IHRoaXMuc2V0dGluZ3MudGl0bGU7XG4gICAgICB0aGlzLm1vZGFsLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVudC5jbGFzc05hbWUgPSBcIm1vZGFsLWNvbnRlbnRcIjtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IHRoaXMuc2V0dGluZ3MuY29udGVudDtcbiAgICB0aGlzLm1vZGFsLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbCk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgaWYgKHRoaXMuY2xvc2VCdXR0b24pIHtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZCgpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGlmIChlbC5zdHlsZS5XZWJraXRUcmFuc2l0aW9uKSByZXR1cm4gXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCI7XG4gICAgaWYgKGVsLnN0eWxlLk9UcmFuc2l0aW9uKSByZXR1cm4gXCJvVHJhbnNpdGlvbkVuZFwiO1xuICAgIHJldHVybiAndHJhbnNpdGlvbmVuZCc7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVFbGVtZW50IChvYmopIHtcbiAgICBpZiAob2JqLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIG9iai5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG9iaik7XG4gICAgfVxuICB9XG59KHdpbmRvdykpO1xuIiwiLy8gaHR0cDovL2pha2V0cmVudC5jb20vcG9zdC9hZGRyZW1vdmUtY2xhc3Nlcy1yYXctamF2YXNjcmlwdC9cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdClcbiAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSlcbiAgZWxzZVxuICAgIHJldHVybiAhIWVsLmNsYXNzTmFtZS5tYXRjaChuZXcgUmVnRXhwKCcoXFxcXHN8XiknICsgY2xhc3NOYW1lICsgJyhcXFxcc3wkKScpKVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpXG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gIGVsc2UgaWYgKCFoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkgZWwuY2xhc3NOYW1lICs9IFwiIFwiICsgY2xhc3NOYW1lXG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdClcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcbiAgZWxzZSBpZiAoaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIGNsYXNzTmFtZSArICcoXFxcXHN8JCknKVxuICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKHJlZywgJyAnKVxuICB9XG59XG5cbmZ1bmN0aW9uIHN3YXBDbGFzcyhlbCwgY2xhc3NBLCBjbGFzc0IpIHtcbiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzQSk7XG4gIGFkZENsYXNzKGVsLCBjbGFzc0IpO1xufVxuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMjYwNjkvY2FwaXRhbGl6ZS10aGUtZmlyc3QtbGV0dGVyLW9mLXN0cmluZy1pbi1qYXZhc2NyaXB0XG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3Qoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbn1cblxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84ODMwODM5L2phdmFzY3JpcHQtZG9tLXJlbW92ZS1lbGVtZW50XG5mdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsKSB7XG4gIGlmIChlbCkge1xuICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTc2NzMyNS9ob3ctdG8tcmVtb3ZlLWEtcGFydGljdWxhci1lbGVtZW50LWZyb20tYW4tYXJyYXktaW4tamF2YXNjcmlwdFxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyLCBpdGVtKSB7XG4gICAgZm9yKHZhciBpID0gYXJyLmxlbmd0aDsgaS0tOykge1xuICAgICAgICBpZihhcnJbaV0gPT09IGl0ZW0pIHtcbiAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luY2x1ZGVzI1BvbHlmaWxsXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXgqLyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XG4gICAgdmFyIGxlbiA9IHBhcnNlSW50KE8ubGVuZ3RoLCAxMCkgfHwgMDtcbiAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBuID0gcGFyc2VJbnQoYXJndW1lbnRzWzFdLCAxMCkgfHwgMDtcbiAgICB2YXIgaztcbiAgICBpZiAobiA+PSAwKSB7XG4gICAgICBrID0gbjtcbiAgICB9IGVsc2Uge1xuICAgICAgayA9IGxlbiArIG47XG4gICAgICBpZiAoayA8IDApIHtrID0gMDt9XG4gICAgfVxuICAgIHZhciBjdXJyZW50RWxlbWVudDtcbiAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgY3VycmVudEVsZW1lbnQgPSBPW2tdO1xuICAgICAgaWYgKHNlYXJjaEVsZW1lbnQgPT09IGN1cnJlbnRFbGVtZW50IHx8XG4gICAgICAgICAoc2VhcmNoRWxlbWVudCAhPT0gc2VhcmNoRWxlbWVudCAmJiBjdXJyZW50RWxlbWVudCAhPT0gY3VycmVudEVsZW1lbnQpKSB7IC8vIE5hTiAhPT0gTmFOXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaysrO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
