function init(){fillMap(map),addPlayer(),setButton()}function getMask(e,t){var n=0,a=2*(map.getTile(e,t-1)||0),o=8*(map.getTile(e-1,t)||0),l=16*(map.getTile(e+1,t)||0),d=64*(map.getTile(e,t+1)||0);n+=a+o+l+d,a>0&&o>0&&(n+=map.getTile(e-1,t-1)||0),a>0&&l>0&&(n+=4*(map.getTile(e+1,t-1)||0)),d>0&&o>0&&(n+=32*(map.getTile(e-1,t+1)||0)),d>0&&l>0&&(n+=128*(map.getTile(e+1,t+1)||0));var i={2:1,8:2,10:3,11:4,16:5,18:6,22:7,24:8,26:9,27:10,30:11,31:12,64:13,66:14,72:15,74:16,75:17,80:18,82:19,86:20,88:21,90:22,91:23,94:24,95:25,104:26,106:27,107:28,120:29,122:30,123:31,126:32,127:33,208:34,210:35,214:36,216:37,218:38,219:39,222:40,223:41,248:42,250:43,251:44,254:45,255:46,0:47};return i[n+""]}function fillMap(e){dungeon=document.getElementById("dungeon"),dungeon.style.width="512px",dungeon.style.height="512px";for(var t=document.createDocumentFragment(),n=0;T_COUNT>n;n++)for(var a=0;T_COUNT>a;a++){var o=document.createElement("div");o.id=a+"_"+n,o.className="dungeonTile",o.style.width="64px",o.style.height="64px",e.getTile(a,n)>0&&(o.style.backgroundImage="url('static/img/tiles/"+getMask(a,n)+".png')"),o.addEventListener("click",moveHere),o.dataset.x=a,o.dataset.y=n,t.appendChild(o)}dungeon.appendChild(t)}function addPlayer(){dungeon=document.getElementById("dungeon");var e=document.createElement("div");e.id="player",e.className="dungeonObject",e.style.width="64px",e.style.height="64px",e.style.backgroundImage="url('static/img/SHC.png')",e.style.backgroundSize="64px 64px ",dungeon.appendChild(e)}function movePlayer(e,t){var n=document.getElementById("player");1==map.getTile(player.x+e,player.y+t)&&(player.x+=e,player.y+=t,n.style.left=player.x*T_WIDTH+"px",n.style.top=player.y*T_WIDTH-PLAYER_OFFSET+"px")}function checkKey(e){e=e||window.event,"38"==e.keyCode||"87"==e.keyCode?movePlayer(0,-1):"40"==e.keyCode||"83"==e.keyCode?movePlayer(0,1):"37"==e.keyCode||"65"==e.keyCode?movePlayer(-1,0):"39"!=e.keyCode&&"68"!=e.keyCode||movePlayer(1,0)}function moveHere(){Math.abs(this.dataset.x-player.x)>Math.abs(this.dataset.y-player.y)?this.dataset.x-player.x>0?movePlayer(1,0):movePlayer(-1,0):this.dataset.y-player.y>0?movePlayer(0,1):movePlayer(0,-1)}function setButton(){tButton=document.getElementById("tButton"),tButton.onclick=demoAjax}function demoAjax(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(document.getElementById("demo").innerHTML=e.responseText)},e.open("GET","api/test",!0),e.send()}window.onload=init;const T_WIDTH=64,T_COUNT=8,TILE_LOC="static/img/tiles/",PLAYER_OFFSET=20;var map={cols:T_COUNT,rows:T_COUNT,tsize:T_WIDTH,tiles:[1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,0,1,1,0,1,0,1,1,1,0,1,0,1,1,1,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,1,0,0,0,0,0,0],getTile:function(e,t){return e>map.cols-1||t>map.rows-1||0>t||0>e?0:this.tiles[t*map.cols+e]}},player={x:0,y:0};document.onkeydown=checkKey,window.addEventListener("keydown",function(e){[32,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault()},!1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR1bmdlb24uanMiXSwibmFtZXMiOlsiaW5pdCIsImZpbGxNYXAiLCJtYXAiLCJhZGRQbGF5ZXIiLCJzZXRCdXR0b24iLCJnZXRNYXNrIiwieCIsInkiLCJ0b3RhbCIsIm5vcnRoIiwiZ2V0VGlsZSIsIndlc3QiLCJlYXN0Iiwic291dGgiLCJjb252ZXJ0ZXIiLCIyIiwiOCIsIjEwIiwiMTEiLCIxNiIsIjE4IiwiMjIiLCIyNCIsIjI2IiwiMjciLCIzMCIsIjMxIiwiNjQiLCI2NiIsIjcyIiwiNzQiLCI3NSIsIjgwIiwiODIiLCI4NiIsIjg4IiwiOTAiLCI5MSIsIjk0IiwiOTUiLCIxMDQiLCIxMDYiLCIxMDciLCIxMjAiLCIxMjIiLCIxMjMiLCIxMjYiLCIxMjciLCIyMDgiLCIyMTAiLCIyMTQiLCIyMTYiLCIyMTgiLCIyMTkiLCIyMjIiLCIyMjMiLCIyNDgiLCIyNTAiLCIyNTEiLCIyNTQiLCIyNTUiLCIwIiwiZHVuZ2VvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwidG9BZGQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaSIsIlRfQ09VTlQiLCJqIiwibmV3RGl2IiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NOYW1lIiwiVF9XSURUSCIsImJhY2tncm91bmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb3ZlSGVyZSIsImRhdGFzZXQiLCJhcHBlbmRDaGlsZCIsInBsYXllckRpdiIsImJhY2tncm91bmRTaXplIiwibW92ZVBsYXllciIsInBsYXllciIsImxlZnQiLCJ0b3AiLCJQTEFZRVJfT0ZGU0VUIiwiY2hlY2tLZXkiLCJlIiwid2luZG93IiwiZXZlbnQiLCJrZXlDb2RlIiwiTWF0aCIsImFicyIsInRoaXMiLCJ0QnV0dG9uIiwib25jbGljayIsImRlbW9BamF4IiwieGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJvcGVuIiwic2VuZCIsIm9ubG9hZCIsIlRJTEVfTE9DIiwiY29scyIsInJvd3MiLCJ0c2l6ZSIsInRpbGVzIiwiY29sIiwicm93Iiwib25rZXlkb3duIiwiaW5kZXhPZiIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFFQSxRQUFTQSxRQUNQQyxRQUFRQyxLQUNSQyxZQUNBQyxZQW9DRixRQUFTQyxTQUFRQyxFQUFHQyxHQUNsQixHQUFJQyxHQUFRLEVBQ1JDLEVBQVMsR0FBS1AsSUFBSVEsUUFBUUosRUFBR0MsRUFBSSxJQUFNLEdBQ3ZDSSxFQUFPLEdBQUtULElBQUlRLFFBQVFKLEVBQUksRUFBR0MsSUFBTSxHQUNyQ0ssRUFBTyxJQUFNVixJQUFJUSxRQUFRSixFQUFJLEVBQUdDLElBQU0sR0FDdENNLEVBQVEsSUFBTVgsSUFBSVEsUUFBUUosRUFBR0MsRUFBSSxJQUFNLEVBQzNDQyxJQUFTQyxFQUFRRSxFQUFPQyxFQUFPQyxFQUMzQkosRUFBUSxHQUFLRSxFQUFPLElBQ3RCSCxHQUFVTixJQUFJUSxRQUFRSixFQUFJLEVBQUdDLEVBQUksSUFBTSxHQUVyQ0UsRUFBUSxHQUFLRyxFQUFPLElBQ3RCSixHQUFTLEdBQUtOLElBQUlRLFFBQVFKLEVBQUksRUFBR0MsRUFBSSxJQUFNLElBRXpDTSxFQUFRLEdBQUtGLEVBQU8sSUFDdEJILEdBQVMsSUFBTU4sSUFBSVEsUUFBUUosRUFBSSxFQUFHQyxFQUFJLElBQU0sSUFFMUNNLEVBQVEsR0FBS0QsRUFBTyxJQUN0QkosR0FBUyxLQUFPTixJQUFJUSxRQUFRSixFQUFJLEVBQUdDLEVBQUksSUFBTSxHQUUvQyxJQUFJTyxJQUFjQyxFQUFNLEVBQUdDLEVBQU0sRUFBR0MsR0FBTyxFQUFHQyxHQUFPLEVBQUdDLEdBQU8sRUFBR0MsR0FBTyxFQUFHQyxHQUFPLEVBQUdDLEdBQU8sRUFBR0MsR0FBTyxFQUFHQyxHQUFPLEdBQUlDLEdBQU8sR0FBSUMsR0FBTyxHQUFJQyxHQUFPLEdBQUlD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QixFQUFORCxFQUNsRCxFQUVGbkIsS0FBS2tCLE1BQU1FLEVBQU1uSCxJQUFJOEcsS0FBT0ksS0FJbkM5QixRQUNGaEYsRUFBRyxFQUNIQyxFQUFHLEVBMEVMd0QsVUFBU3VELFVBQVk1QixTQUVyQkUsT0FBT2IsaUJBQWlCLFVBQVcsU0FBU1ksSUFFcEMsR0FBSSxHQUFJLEdBQUksR0FBSSxJQUFJNEIsUUFBUTVCLEVBQUVHLFNBQVcsSUFDekNILEVBQUU2QixtQkFFUCIsImZpbGUiOiJkdW5nZW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSBpbml0O1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICBmaWxsTWFwKG1hcCk7XG4gIGFkZFBsYXllcigpO1xuICBzZXRCdXR0b24oKTtcbn1cblxuY29uc3QgVF9XSURUSCA9IDY0O1xuY29uc3QgVF9DT1VOVCA9IDg7XG5jb25zdCBUSUxFX0xPQyA9IFwic3RhdGljL2ltZy90aWxlcy9cIlxuY29uc3QgUExBWUVSX09GRlNFVCA9IDIwO1xuXG52YXIgbWFwID0ge1xuICBjb2xzOiBUX0NPVU5ULFxuICByb3dzOiBUX0NPVU5ULFxuICB0c2l6ZTogVF9XSURUSCxcbiAgdGlsZXM6IFtcbiAgICAxLCAxLCAwLCAwLCAwLCAxLCAxLCAxLFxuICAgIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDEsXG4gICAgMCwgMSwgMSwgMCwgMSwgMCwgMSwgMSxcbiAgICAxLCAwLCAxLCAwLCAxLCAxLCAxLCAwLFxuICAgIDAsIDAsIDEsIDEsIDAsIDEsIDEsIDEsXG4gICAgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMCxcbiAgICAxLCAxLCAxLCAwLCAwLCAxLCAxLCAwLFxuICAgIDAsIDEsIDAsIDAsIDAsIDAsIDAsIDBcbiAgXSxcbiAgZ2V0VGlsZTogZnVuY3Rpb24oY29sLCByb3cpIHtcbiAgICBpZiAoY29sID4gbWFwLmNvbHMgLSAxIHx8IHJvdyA+IG1hcC5yb3dzIC0gMSB8fCByb3cgPCAwIHx8IGNvbCA8IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aWxlc1tyb3cgKiBtYXAuY29scyArIGNvbF07XG4gIH1cbn07XG5cbnZhciBwbGF5ZXIgPSB7XG4gIHg6IDAsXG4gIHk6IDBcbn07XG5cblxuZnVuY3Rpb24gZ2V0TWFzayh4LCB5KSB7XG4gIHZhciB0b3RhbCA9IDA7XG4gIHZhciBub3J0aCA9ICAyICogKG1hcC5nZXRUaWxlKHgsIHkgLSAxKSB8fCAwKTtcbiAgdmFyIHdlc3QgPSA4ICogKG1hcC5nZXRUaWxlKHggLSAxLCB5KSB8fCAwKTtcbiAgdmFyIGVhc3QgPSAxNiAqIChtYXAuZ2V0VGlsZSh4ICsgMSwgeSkgfHwgMCk7XG4gIHZhciBzb3V0aCA9IDY0ICogKG1hcC5nZXRUaWxlKHgsIHkgKyAxKSB8fCAwKTtcbiAgdG90YWwgKz0gbm9ydGggKyB3ZXN0ICsgZWFzdCArIHNvdXRoO1xuICBpZiAobm9ydGggPiAwICYmIHdlc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gKG1hcC5nZXRUaWxlKHggLSAxLCB5IC0gMSkgfHwgMCk7XG4gIH1cbiAgaWYgKG5vcnRoID4gMCAmJiBlYXN0ID4gMCkge1xuICAgIHRvdGFsICs9IDQgKiAobWFwLmdldFRpbGUoeCArIDEsIHkgLSAxKSB8fCAwKTtcbiAgfVxuICBpZiAoc291dGggPiAwICYmIHdlc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gMzIgKiAobWFwLmdldFRpbGUoeCAtIDEsIHkgKyAxKSB8fCAwKTtcbiAgfVxuICBpZiAoc291dGggPiAwICYmIGVhc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gMTI4ICogKG1hcC5nZXRUaWxlKHggKyAxLCB5ICsgMSkgfHwgMCk7XG4gIH1cbiAgdmFyIGNvbnZlcnRlciA9IHsgXCIyXCIgOiAxLCBcIjhcIiA6IDIsIFwiMTBcIiA6IDMsIFwiMTFcIiA6IDQsIFwiMTZcIiA6IDUsIFwiMThcIiA6IDYsIFwiMjJcIiA6IDcsIFwiMjRcIiA6IDgsIFwiMjZcIiA6IDksIFwiMjdcIiA6IDEwLCBcIjMwXCIgOiAxMSwgXCIzMVwiIDogMTIsIFwiNjRcIiA6IDEzLCBcIjY2XCIgOiAxNCwgXCI3MlwiIDogMTUsIFwiNzRcIiA6IDE2LCBcIjc1XCIgOiAxNywgXCI4MFwiIDogMTgsIFwiODJcIiA6IDE5LCBcIjg2XCIgOiAyMCwgXCI4OFwiIDogMjEsIFwiOTBcIiA6IDIyLCBcIjkxXCIgOiAyMywgXCI5NFwiIDogMjQsIFwiOTVcIiA6IDI1LCBcIjEwNFwiIDogMjYsIFwiMTA2XCIgOiAyNywgXCIxMDdcIiA6IDI4LCBcIjEyMFwiIDogMjksIFwiMTIyXCIgOiAzMCwgXCIxMjNcIiA6IDMxLCBcIjEyNlwiIDogMzIsIFwiMTI3XCIgOiAzMywgXCIyMDhcIiA6IDM0LCBcIjIxMFwiIDogMzUsIFwiMjE0XCIgOiAzNiwgXCIyMTZcIiA6IDM3LCBcIjIxOFwiIDogMzgsIFwiMjE5XCIgOiAzOSwgXCIyMjJcIiA6IDQwLCBcIjIyM1wiIDogNDEsIFwiMjQ4XCIgOiA0MiwgXCIyNTBcIiA6IDQzLCBcIjI1MVwiIDogNDQsIFwiMjU0XCIgOiA0NSwgXCIyNTVcIiA6IDQ2LCBcIjBcIiA6IDQ3IH07XG4gIHJldHVybiBjb252ZXJ0ZXJbdG90YWwgKyBcIlwiXTtcbn1cblxuZnVuY3Rpb24gZmlsbE1hcChtYXApIHtcbiAgZHVuZ2VvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdW5nZW9uJyk7XG4gIGR1bmdlb24uc3R5bGUud2lkdGggPSAoVF9XSURUSCAqIFRfQ09VTlQpICsgXCJweFwiO1xuICBkdW5nZW9uLnN0eWxlLmhlaWdodCA9IChUX1dJRFRIICogVF9DT1VOVCkgKyBcInB4XCI7XG5cbiAgdmFyIHRvQWRkID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IFRfQ09VTlQ7IGkrKykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgVF9DT1VOVDsgaisrKSB7XG4gICAgICAgdmFyIG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgIG5ld0Rpdi5pZCA9IGogKyBcIl9cIiArIGk7XG4gICAgICAgbmV3RGl2LmNsYXNzTmFtZSA9ICdkdW5nZW9uVGlsZSc7XG4gICAgICAgbmV3RGl2LnN0eWxlLndpZHRoID0gVF9XSURUSCArIFwicHhcIjtcbiAgICAgICBuZXdEaXYuc3R5bGUuaGVpZ2h0ID0gVF9XSURUSCArIFwicHhcIjtcbiAgICAgICBpZiAobWFwLmdldFRpbGUoaiwgaSkgPiAwKSB7XG4gICAgICAgICBuZXdEaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ3N0YXRpYy9pbWcvdGlsZXMvXCIgKyBnZXRNYXNrKGosIGkpICsgXCIucG5nJylcIjtcbiAgICAgICB9XG4gICAgICAgbmV3RGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBtb3ZlSGVyZSk7XG4gICAgICAgbmV3RGl2LmRhdGFzZXQueCA9IGo7XG4gICAgICAgbmV3RGl2LmRhdGFzZXQueSA9IGk7XG4gICAgICAgdG9BZGQuYXBwZW5kQ2hpbGQobmV3RGl2KTtcbiAgICB9XG4gIH1cbiAgZHVuZ2Vvbi5hcHBlbmRDaGlsZCh0b0FkZCk7XG59XG5cbmZ1bmN0aW9uIGFkZFBsYXllcigpIHtcbiAgZHVuZ2VvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdW5nZW9uJyk7XG4gIHZhciBwbGF5ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcGxheWVyRGl2LmlkID0gJ3BsYXllcic7XG4gIHBsYXllckRpdi5jbGFzc05hbWUgPSAnZHVuZ2Vvbk9iamVjdCc7XG4gIHBsYXllckRpdi5zdHlsZS53aWR0aCA9IFRfV0lEVEggKyBcInB4XCI7XG4gIHBsYXllckRpdi5zdHlsZS5oZWlnaHQgPSBUX1dJRFRIICsgXCJweFwiO1xuICBwbGF5ZXJEaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ3N0YXRpYy9pbWcvU0hDLnBuZycpXCI7XG4gIHBsYXllckRpdi5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICBUX1dJRFRIICsgXCJweCBcIiArIFRfV0lEVEggKyBcInB4IFwiO1xuICBkdW5nZW9uLmFwcGVuZENoaWxkKHBsYXllckRpdik7XG59XG5cbmZ1bmN0aW9uIG1vdmVQbGF5ZXIoeCwgeSkge1xuICB2YXIgcGxheWVyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcicpO1xuICBpZiAobWFwLmdldFRpbGUocGxheWVyLnggKyB4LCBwbGF5ZXIueSArIHkpID09IDEpIHtcbiAgICBwbGF5ZXIueCArPSB4O1xuICAgIHBsYXllci55ICs9IHk7XG4gICAgcGxheWVyRGl2LnN0eWxlLmxlZnQgPSAgKHBsYXllci54ICogVF9XSURUSCkgKyBcInB4XCI7XG4gICAgcGxheWVyRGl2LnN0eWxlLnRvcCA9ICAocGxheWVyLnkgKiBUX1dJRFRIIC0gUExBWUVSX09GRlNFVCkgKyBcInB4XCI7XG4gIH1cbn1cblxuZG9jdW1lbnQub25rZXlkb3duID0gY2hlY2tLZXk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gc3BhY2UgYW5kIGFycm93IGtleXNcbiAgICBpZihbMzIsIDM3LCAzOCwgMzksIDQwXS5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufSwgZmFsc2UpO1xuXG5mdW5jdGlvbiBjaGVja0tleShlKSB7XG5cbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICBpZiAoZS5rZXlDb2RlID09ICczOCcgfHwgZS5rZXlDb2RlID09ICc4NycpIHtcbiAgICAgICAgLy8gdXAgYXJyb3dcbiAgICAgICAgbW92ZVBsYXllcigwLCAtMSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnNDAnIHx8IGUua2V5Q29kZSA9PSAnODMnKSB7XG4gICAgICAgIC8vIGRvd24gYXJyb3dcbiAgICAgICAgbW92ZVBsYXllcigwLCAxKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09ICczNycgfHwgZS5rZXlDb2RlID09ICc2NScpIHtcbiAgICAgICAvLyBsZWZ0IGFycm93XG4gICAgICAgbW92ZVBsYXllcigtMSwgMCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnMzknIHx8IGUua2V5Q29kZSA9PSAnNjgnKSB7XG4gICAgICAgLy8gcmlnaHQgYXJyb3dcbiAgICAgICBtb3ZlUGxheWVyKDEsIDApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW92ZUhlcmUgKCkge1xuICBpZiAoTWF0aC5hYnModGhpcy5kYXRhc2V0LnggLSBwbGF5ZXIueCkgPiAgTWF0aC5hYnModGhpcy5kYXRhc2V0LnkgLSBwbGF5ZXIueSkpIHtcbiAgICBpZiAodGhpcy5kYXRhc2V0LnggLSBwbGF5ZXIueCA+IDApIHtcbiAgICAgIG1vdmVQbGF5ZXIoMSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdmVQbGF5ZXIoLTEsIDApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy5kYXRhc2V0LnkgLSBwbGF5ZXIueSA+IDApIHtcbiAgICAgIG1vdmVQbGF5ZXIoMCwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdmVQbGF5ZXIoMCwgLTEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRCdXR0b24oKSB7XG4gIHRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRCdXR0b25cIik7XG4gIHRCdXR0b24ub25jbGljayA9IGRlbW9BamF4O1xufVxuXG5mdW5jdGlvbiBkZW1vQWpheCgpIHtcbiAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZW1vXCIpLmlubmVySFRNTCA9IHhodHRwLnJlc3BvbnNlVGV4dDtcbiAgICB9XG4gIH07XG4gIHhodHRwLm9wZW4oXCJHRVRcIiwgXCJhcGkvdGVzdFwiLCB0cnVlKTtcbiAgeGh0dHAuc2VuZCgpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
