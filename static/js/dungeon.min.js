function init(){getMap(),setButton()}function getMap(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=JSON.parse(e.responseText);map.tiles=t.map,fillMap(map),addPlayer(t.player.x,t.player.y)}},e.open("GET","api/dungeon",!0),e.send()}function getMask(e,t){var a=0,n=2*(map.getTile(e,t-1)||0),y=8*(map.getTile(e-1,t)||0),i=16*(map.getTile(e+1,t)||0),l=64*(map.getTile(e,t+1)||0);a+=n+y+i+l,n>0&&y>0&&(a+=map.getTile(e-1,t-1)||0),n>0&&i>0&&(a+=4*(map.getTile(e+1,t-1)||0)),l>0&&y>0&&(a+=32*(map.getTile(e-1,t+1)||0)),l>0&&i>0&&(a+=128*(map.getTile(e+1,t+1)||0));var o={2:1,8:2,10:3,11:4,16:5,18:6,22:7,24:8,26:9,27:10,30:11,31:12,64:13,66:14,72:15,74:16,75:17,80:18,82:19,86:20,88:21,90:22,91:23,94:24,95:25,104:26,106:27,107:28,120:29,122:30,123:31,126:32,127:33,208:34,210:35,214:36,216:37,218:38,219:39,222:40,223:41,248:42,250:43,251:44,254:45,255:46,0:47};return o[a+""]}function fillMap(e){dungeon=document.getElementById("dungeon"),dungeon.style.width="640px",dungeon.style.height="512px";for(var t=document.createDocumentFragment(),a=0;T_COUNTY>a;a++)for(var n=0;T_COUNTX>n;n++){var y=document.createElement("div");y.id=n+"_"+a,y.className="dungeonTile",y.style.width="64px",y.style.height="64px",e.getTile(n,a)>0&&(y.style.backgroundImage="url('static/img/tiles/"+getMask(n,a)+".png')"),y.addEventListener("click",findPath),y.dataset.x=n,y.dataset.y=a,t.appendChild(y)}dungeon.appendChild(t)}function addPlayer(e,t){dungeon=document.getElementById("dungeon");var a=document.createElement("div");a.id="player",a.className="dungeonObject",a.style.width="64px",a.style.height="64px",a.style.backgroundImage="url('static/img/SHC.png')",a.style.backgroundSize="64px 64px ",dungeon.appendChild(a),movePlayer(e,t)}function movePlayer(e,t){var a=document.getElementById("player");1==map.getTile(player.x+e,player.y+t)&&(player.x+=e,player.y+=t,a.style.left=player.x*T_WIDTH+"px",a.style.top=player.y*T_WIDTH-PLAYER_OFFSET+"px")}function checkKey(e){e=e||window.event,"38"==e.keyCode||"87"==e.keyCode?movePlayer(0,-1):"40"==e.keyCode||"83"==e.keyCode?movePlayer(0,1):"37"==e.keyCode||"65"==e.keyCode?movePlayer(-1,0):"39"!=e.keyCode&&"68"!=e.keyCode||movePlayer(1,0)}function moveHere(){Math.abs(this.dataset.x-player.x)>Math.abs(this.dataset.y-player.y)?this.dataset.x-player.x>0?movePlayer(1,0):movePlayer(-1,0):this.dataset.y-player.y>0?movePlayer(0,1):movePlayer(0,-1)}function findPath(){if(player.x!=this.dataset.x||player.y!=this.dataset.y)for(var e=[{x:this.dataset.x,y:this.dataset.y}],t=[];e.length>0;){var a=e.shift();if(t.push(1*a.x+10*a.y),player.x==a.x-1&&player.y==a.y)return void movePlayer(1,0);if(player.x==1*a.x+1&&player.y==a.y)return void movePlayer(-1,0);if(player.x==1*a.x&&player.y==a.y-1)return void movePlayer(0,1);if(player.x==1*a.x&&player.y==1*a.y+1)return void movePlayer(0,-1);0!=map.getTile(1*a.x-1,1*a.y)&&-1==t.indexOf(1*a.x-1+10*a.y)&&e.push({x:1*a.x-1,y:1*a.y}),0!=map.getTile(1*a.x+1,1*a.y)&&-1==t.indexOf(1*a.x+1+10*a.y)&&e.push({x:1*a.x+1,y:1*a.y}),0!=map.getTile(1*a.x,1*a.y-1)&&-1==t.indexOf(1*a.x+10*(1*a.y-1))&&e.push({x:1*a.x,y:1*a.y-1}),0!=map.getTile(1*a.x,1*a.y+1)&&-1==t.indexOf(1*a.x+10*(1*a.y+1))&&e.push({x:1*a.x,y:1*a.y+1})}}function setButton(){tButton=document.getElementById("tButton"),tButton.onclick=demoAjax}function demoAjax(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(document.getElementById("demo").innerHTML=e.responseText)},e.open("GET","api/test",!0),e.send()}window.addEventListener("load",init);const T_WIDTH=64,T_COUNTX=10,T_COUNTY=8,TILE_LOC="static/img/tiles/",PLAYER_OFFSET=20;var map={cols:T_COUNTX,rows:T_COUNTY,tsize:T_WIDTH,tiles:[1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,0,1,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1,0,1,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,0,0,1,1,0,0,1,0,1,0,0,0,0,0,0,0,1],getTile:function(e,t){return e>map.cols-1||t>map.rows-1||0>t||0>e?0:this.tiles[t*map.cols+e]}},player={x:0,y:0};window.addEventListener("keydown",function(e){document.activeElement&&document.activeElement!=document.body||([37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault(),checkKey())},!1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR1bmdlb24uanMiXSwibmFtZXMiOlsiaW5pdCIsImdldE1hcCIsInNldEJ1dHRvbiIsInhodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwianNvbkRhdGEiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJtYXAiLCJ0aWxlcyIsImZpbGxNYXAiLCJhZGRQbGF5ZXIiLCJwbGF5ZXIiLCJ4IiwieSIsIm9wZW4iLCJzZW5kIiwiZ2V0TWFzayIsInRvdGFsIiwibm9ydGgiLCJnZXRUaWxlIiwid2VzdCIsImVhc3QiLCJzb3V0aCIsImNvbnZlcnRlciIsIjIiLCI4IiwiMTAiLCIxMSIsIjE2IiwiMTgiLCIyMiIsIjI0IiwiMjYiLCIyNyIsIjMwIiwiMzEiLCI2NCIsIjY2IiwiNzIiLCI3NCIsIjc1IiwiODAiLCI4MiIsIjg2IiwiODgiLCI5MCIsIjkxIiwiOTQiLCI5NSIsIjEwNCIsIjEwNiIsIjEwNyIsIjEyMCIsIjEyMiIsIjEyMyIsIjEyNiIsIjEyNyIsIjIwOCIsIjIxMCIsIjIxNCIsIjIxNiIsIjIxOCIsIjIxOSIsIjIyMiIsIjIyMyIsIjI0OCIsIjI1MCIsIjI1MSIsIjI1NCIsIjI1NSIsIjAiLCJkdW5nZW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJ0b0FkZCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiVF9DT1VOVFkiLCJqIiwiVF9DT1VOVFgiLCJuZXdEaXYiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc05hbWUiLCJUX1dJRFRIIiwiYmFja2dyb3VuZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZpbmRQYXRoIiwiZGF0YXNldCIsImFwcGVuZENoaWxkIiwicGxheWVyRGl2IiwiYmFja2dyb3VuZFNpemUiLCJtb3ZlUGxheWVyIiwibGVmdCIsInRvcCIsIlBMQVlFUl9PRkZTRVQiLCJjaGVja0tleSIsImUiLCJ3aW5kb3ciLCJldmVudCIsImtleUNvZGUiLCJtb3ZlSGVyZSIsIk1hdGgiLCJhYnMiLCJ0aGlzIiwicXVldWUiLCJjaGVja2VkIiwibGVuZ3RoIiwiY3VycmVudExvY2F0aW9uIiwic2hpZnQiLCJwdXNoIiwiaW5kZXhPZiIsInRCdXR0b24iLCJvbmNsaWNrIiwiZGVtb0FqYXgiLCJpbm5lckhUTUwiLCJUSUxFX0xPQyIsImNvbHMiLCJyb3dzIiwidHNpemUiLCJjb2wiLCJyb3ciLCJhY3RpdmVFbGVtZW50IiwiYm9keSIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFFQSxRQUFTQSxRQUNQQyxTQUNBQyxZQWdDRixRQUFTRCxVQUNQLEdBQUlFLEdBQVEsR0FBSUMsZUFDaEJELEdBQU1FLG1CQUFxQixXQUN6QixHQUF3QixHQUFwQkYsRUFBTUcsWUFBbUMsS0FBaEJILEVBQU1JLE9BQWUsQ0FDaEQsR0FBSUMsR0FBV0MsS0FBS0MsTUFBTVAsRUFBTVEsYUFDaENDLEtBQUlDLE1BQVFMLEVBQVNJLElBQ3JCRSxRQUFRRixLQUNSRyxVQUFVUCxFQUFTUSxPQUFPQyxFQUFHVCxFQUFTUSxPQUFPRSxLQUdqRGYsRUFBTWdCLEtBQUssTUFBTyxlQUFlLEdBQ2pDaEIsRUFBTWlCLE9BU1IsUUFBU0MsU0FBUUosRUFBR0MsR0FDbEIsR0FBSUksR0FBUSxFQUNSQyxFQUFTLEdBQUtYLElBQUlZLFFBQVFQLEVBQUdDLEVBQUksSUFBTSxHQUN2Q08sRUFBTyxHQUFLYixJQUFJWSxRQUFRUCxFQUFJLEVBQUdDLElBQU0sR0FDckNRLEVBQU8sSUFBTWQsSUFBSVksUUFBUVAsRUFBSSxFQUFHQyxJQUFNLEdBQ3RDUyxFQUFRLElBQU1mLElBQUlZLFFBQVFQLEVBQUdDLEVBQUksSUFBTSxFQUMzQ0ksSUFBU0MsRUFBUUUsRUFBT0MsRUFBT0MsRUFDM0JKLEVBQVEsR0FBS0UsRUFBTyxJQUN0QkgsR0FBVVYsSUFBSVksUUFBUVAsRUFBSSxFQUFHQyxFQUFJLElBQU0sR0FFckNLLEVBQVEs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QUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FFN0JXLFFBQVMsU0FBU3dHLEVBQUtDLEdBQ3JCLE1BQUlELEdBQU1wSCxJQUFJaUgsS0FBTyxHQUFLSSxFQUFNckgsSUFBSWtILEtBQU8sR0FBVyxFQUFORyxHQUFpQixFQUFORCxFQUNsRCxFQUVGaEIsS0FBS25HLE1BQU1vSCxFQUFNckgsSUFBSWlILEtBQU9HLEtBa0JuQ2hILFFBQ0ZDLEVBQUcsRUFDSEMsRUFBRyxFQTJFTHdGLFFBQU9aLGlCQUFpQixVQUFXLFNBQVNXLEdBQ3BDNUIsU0FBU3FELGVBQWlCckQsU0FBU3FELGVBQWlCckQsU0FBU3NELFFBSTdELEdBQUksR0FBSSxHQUFJLElBQUlaLFFBQVFkLEVBQUVHLFNBQVcsSUFDckNILEVBQUUyQixpQkFHTjVCLGNBQ0QiLCJmaWxlIjoiZHVuZ2Vvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdCk7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGdldE1hcCgpO1xuICBzZXRCdXR0b24oKTtcbn1cblxuY29uc3QgVF9XSURUSCA9IDY0O1xuY29uc3QgVF9DT1VOVFggPSAxMDtcbmNvbnN0IFRfQ09VTlRZID0gODtcbmNvbnN0IFRJTEVfTE9DID0gXCJzdGF0aWMvaW1nL3RpbGVzL1wiXG5jb25zdCBQTEFZRVJfT0ZGU0VUID0gMjA7XG5cblxudmFyIG1hcCA9IHtcbiAgY29sczogVF9DT1VOVFgsXG4gIHJvd3M6IFRfQ09VTlRZLFxuICB0c2l6ZTogVF9XSURUSCxcbiAgdGlsZXM6IFtcbiAgICAxLCAxLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLFxuICAgIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDEsIDAsIDEsXG4gICAgMCwgMSwgMSwgMCwgMSwgMCwgMSwgMSwgMCwgMSxcbiAgICAxLCAwLCAxLCAwLCAxLCAxLCAxLCAxLCAwLCAxLFxuICAgIDAsIDAsIDEsIDEsIDAsIDEsIDAsIDEsIDEsIDEsXG4gICAgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMSxcbiAgICAxLCAxLCAxLCAwLCAwLCAxLCAxLCAwLCAwLCAxLFxuICAgIDAsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDFcbiAgXSxcbiAgZ2V0VGlsZTogZnVuY3Rpb24oY29sLCByb3cpIHtcbiAgICBpZiAoY29sID4gbWFwLmNvbHMgLSAxIHx8IHJvdyA+IG1hcC5yb3dzIC0gMSB8fCByb3cgPCAwIHx8IGNvbCA8IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aWxlc1tyb3cgKiBtYXAuY29scyArIGNvbF07XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldE1hcCAoKSB7XG4gIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoeGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHhodHRwLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UoeGh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgIG1hcC50aWxlcyA9IGpzb25EYXRhLm1hcDtcbiAgICAgIGZpbGxNYXAobWFwKTtcbiAgICAgIGFkZFBsYXllcihqc29uRGF0YS5wbGF5ZXIueCwganNvbkRhdGEucGxheWVyLnkpO1xuICAgIH1cbiAgfTtcbiAgeGh0dHAub3BlbihcIkdFVFwiLCBcImFwaS9kdW5nZW9uXCIsIHRydWUpO1xuICB4aHR0cC5zZW5kKCk7XG59XG5cbnZhciBwbGF5ZXIgPSB7XG4gIHg6IDAsXG4gIHk6IDBcbn07XG5cblxuZnVuY3Rpb24gZ2V0TWFzayh4LCB5KSB7XG4gIHZhciB0b3RhbCA9IDA7XG4gIHZhciBub3J0aCA9ICAyICogKG1hcC5nZXRUaWxlKHgsIHkgLSAxKSB8fCAwKTtcbiAgdmFyIHdlc3QgPSA4ICogKG1hcC5nZXRUaWxlKHggLSAxLCB5KSB8fCAwKTtcbiAgdmFyIGVhc3QgPSAxNiAqIChtYXAuZ2V0VGlsZSh4ICsgMSwgeSkgfHwgMCk7XG4gIHZhciBzb3V0aCA9IDY0ICogKG1hcC5nZXRUaWxlKHgsIHkgKyAxKSB8fCAwKTtcbiAgdG90YWwgKz0gbm9ydGggKyB3ZXN0ICsgZWFzdCArIHNvdXRoO1xuICBpZiAobm9ydGggPiAwICYmIHdlc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gKG1hcC5nZXRUaWxlKHggLSAxLCB5IC0gMSkgfHwgMCk7XG4gIH1cbiAgaWYgKG5vcnRoID4gMCAmJiBlYXN0ID4gMCkge1xuICAgIHRvdGFsICs9IDQgKiAobWFwLmdldFRpbGUoeCArIDEsIHkgLSAxKSB8fCAwKTtcbiAgfVxuICBpZiAoc291dGggPiAwICYmIHdlc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gMzIgKiAobWFwLmdldFRpbGUoeCAtIDEsIHkgKyAxKSB8fCAwKTtcbiAgfVxuICBpZiAoc291dGggPiAwICYmIGVhc3QgPiAwKSB7XG4gICAgdG90YWwgKz0gMTI4ICogKG1hcC5nZXRUaWxlKHggKyAxLCB5ICsgMSkgfHwgMCk7XG4gIH1cbiAgdmFyIGNvbnZlcnRlciA9IHsgXCIyXCIgOiAxLCBcIjhcIiA6IDIsIFwiMTBcIiA6IDMsIFwiMTFcIiA6IDQsIFwiMTZcIiA6IDUsIFwiMThcIiA6IDYsIFwiMjJcIiA6IDcsIFwiMjRcIiA6IDgsIFwiMjZcIiA6IDksIFwiMjdcIiA6IDEwLCBcIjMwXCIgOiAxMSwgXCIzMVwiIDogMTIsIFwiNjRcIiA6IDEzLCBcIjY2XCIgOiAxNCwgXCI3MlwiIDogMTUsIFwiNzRcIiA6IDE2LCBcIjc1XCIgOiAxNywgXCI4MFwiIDogMTgsIFwiODJcIiA6IDE5LCBcIjg2XCIgOiAyMCwgXCI4OFwiIDogMjEsIFwiOTBcIiA6IDIyLCBcIjkxXCIgOiAyMywgXCI5NFwiIDogMjQsIFwiOTVcIiA6IDI1LCBcIjEwNFwiIDogMjYsIFwiMTA2XCIgOiAyNywgXCIxMDdcIiA6IDI4LCBcIjEyMFwiIDogMjksIFwiMTIyXCIgOiAzMCwgXCIxMjNcIiA6IDMxLCBcIjEyNlwiIDogMzIsIFwiMTI3XCIgOiAzMywgXCIyMDhcIiA6IDM0LCBcIjIxMFwiIDogMzUsIFwiMjE0XCIgOiAzNiwgXCIyMTZcIiA6IDM3LCBcIjIxOFwiIDogMzgsIFwiMjE5XCIgOiAzOSwgXCIyMjJcIiA6IDQwLCBcIjIyM1wiIDogNDEsIFwiMjQ4XCIgOiA0MiwgXCIyNTBcIiA6IDQzLCBcIjI1MVwiIDogNDQsIFwiMjU0XCIgOiA0NSwgXCIyNTVcIiA6IDQ2LCBcIjBcIiA6IDQ3IH07XG4gIHJldHVybiBjb252ZXJ0ZXJbdG90YWwgKyBcIlwiXTtcbn1cblxuZnVuY3Rpb24gZmlsbE1hcChtYXApIHtcbiAgZHVuZ2VvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdW5nZW9uJyk7XG4gIGR1bmdlb24uc3R5bGUud2lkdGggPSAoVF9XSURUSCAqIFRfQ09VTlRYKSArIFwicHhcIjtcbiAgZHVuZ2Vvbi5zdHlsZS5oZWlnaHQgPSAoVF9XSURUSCAqIFRfQ09VTlRZKSArIFwicHhcIjtcblxuICB2YXIgdG9BZGQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgVF9DT1VOVFk7IGkrKykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgVF9DT1VOVFg7IGorKykge1xuICAgICAgIHZhciBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICBuZXdEaXYuaWQgPSBqICsgXCJfXCIgKyBpO1xuICAgICAgIG5ld0Rpdi5jbGFzc05hbWUgPSAnZHVuZ2VvblRpbGUnO1xuICAgICAgIG5ld0Rpdi5zdHlsZS53aWR0aCA9IFRfV0lEVEggKyBcInB4XCI7XG4gICAgICAgbmV3RGl2LnN0eWxlLmhlaWdodCA9IFRfV0lEVEggKyBcInB4XCI7XG4gICAgICAgaWYgKG1hcC5nZXRUaWxlKGosIGkpID4gMCkge1xuICAgICAgICAgbmV3RGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdzdGF0aWMvaW1nL3RpbGVzL1wiICsgZ2V0TWFzayhqLCBpKSArIFwiLnBuZycpXCI7XG4gICAgICAgfVxuICAgICAgIG5ld0Rpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZmluZFBhdGgpO1xuICAgICAgIG5ld0Rpdi5kYXRhc2V0LnggPSBqO1xuICAgICAgIG5ld0Rpdi5kYXRhc2V0LnkgPSBpO1xuICAgICAgIHRvQWRkLmFwcGVuZENoaWxkKG5ld0Rpdik7XG4gICAgfVxuICB9XG4gIGR1bmdlb24uYXBwZW5kQ2hpbGQodG9BZGQpO1xufVxuXG5mdW5jdGlvbiBhZGRQbGF5ZXIoeCwgeSkge1xuICBkdW5nZW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1bmdlb24nKTtcbiAgdmFyIHBsYXllckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwbGF5ZXJEaXYuaWQgPSAncGxheWVyJztcbiAgcGxheWVyRGl2LmNsYXNzTmFtZSA9ICdkdW5nZW9uT2JqZWN0JztcbiAgcGxheWVyRGl2LnN0eWxlLndpZHRoID0gVF9XSURUSCArIFwicHhcIjtcbiAgcGxheWVyRGl2LnN0eWxlLmhlaWdodCA9IFRfV0lEVEggKyBcInB4XCI7XG4gIHBsYXllckRpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnc3RhdGljL2ltZy9TSEMucG5nJylcIjtcbiAgcGxheWVyRGl2LnN0eWxlLmJhY2tncm91bmRTaXplID0gIFRfV0lEVEggKyBcInB4IFwiICsgVF9XSURUSCArIFwicHggXCI7XG4gIGR1bmdlb24uYXBwZW5kQ2hpbGQocGxheWVyRGl2KTtcbiAgbW92ZVBsYXllcih4LCB5KTtcbn1cblxuZnVuY3Rpb24gbW92ZVBsYXllcih4LCB5KSB7XG4gIHZhciBwbGF5ZXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJyk7XG4gIGlmIChtYXAuZ2V0VGlsZShwbGF5ZXIueCArIHgsIHBsYXllci55ICsgeSkgPT0gMSkge1xuICAgIHBsYXllci54ICs9IHg7XG4gICAgcGxheWVyLnkgKz0geTtcbiAgICBwbGF5ZXJEaXYuc3R5bGUubGVmdCA9ICAocGxheWVyLnggKiBUX1dJRFRIKSArIFwicHhcIjtcbiAgICBwbGF5ZXJEaXYuc3R5bGUudG9wID0gIChwbGF5ZXIueSAqIFRfV0lEVEggLSBQTEFZRVJfT0ZGU0VUKSArIFwicHhcIjtcbiAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBzcGFjZSBhbmQgYXJyb3cga2V5c1xuICAgIGlmKFszNywgMzgsIDM5LCA0MF0uaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGNoZWNrS2V5KCk7XG59LCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGNoZWNrS2V5KGUpIHtcbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICBpZiAoZS5rZXlDb2RlID09ICczOCcgfHwgZS5rZXlDb2RlID09ICc4NycpIHtcbiAgICAgIC8vIHVwIGFycm93XG4gICAgICBtb3ZlUGxheWVyKDAsIC0xKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnNDAnIHx8IGUua2V5Q29kZSA9PSAnODMnKSB7XG4gICAgICAvLyBkb3duIGFycm93XG4gICAgICBtb3ZlUGxheWVyKDAsIDEpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09ICczNycgfHwgZS5rZXlDb2RlID09ICc2NScpIHtcbiAgICAgICAvLyBsZWZ0IGFycm93XG4gICAgICAgbW92ZVBsYXllcigtMSwgMCk7XG4gICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzM5JyB8fCBlLmtleUNvZGUgPT0gJzY4Jykge1xuICAgICAgIC8vIHJpZ2h0IGFycm93XG4gICAgICAgbW92ZVBsYXllcigxLCAwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1vdmVIZXJlICgpIHtcbiAgaWYgKE1hdGguYWJzKHRoaXMuZGF0YXNldC54IC0gcGxheWVyLngpID4gIE1hdGguYWJzKHRoaXMuZGF0YXNldC55IC0gcGxheWVyLnkpKSB7XG4gICAgaWYgKHRoaXMuZGF0YXNldC54IC0gcGxheWVyLnggPiAwKSB7XG4gICAgICBtb3ZlUGxheWVyKDEsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb3ZlUGxheWVyKC0xLCAwKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMuZGF0YXNldC55IC0gcGxheWVyLnkgPiAwKSB7XG4gICAgICBtb3ZlUGxheWVyKDAsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb3ZlUGxheWVyKDAsIC0xKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZFBhdGgoKSB7XG4gIGlmIChwbGF5ZXIueCA9PSB0aGlzLmRhdGFzZXQueCAmJiBwbGF5ZXIueSA9PSB0aGlzLmRhdGFzZXQueSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcXVldWUgPSBbe3ggOiB0aGlzLmRhdGFzZXQueCwgeSA6IHRoaXMuZGF0YXNldC55fV07XG4gIHZhciBjaGVja2VkID0gW107XG4gIHZhciBmb3VuZCA9IGZhbHNlO1xuICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgIHZhciBjdXJyZW50TG9jYXRpb24gPSBxdWV1ZS5zaGlmdCgpO1xuICAgIGNoZWNrZWQucHVzaCgxICogY3VycmVudExvY2F0aW9uLnggKyAxMCAqIGN1cnJlbnRMb2NhdGlvbi55KTtcbiAgICBpZiAocGxheWVyLnggPT0gY3VycmVudExvY2F0aW9uLnggLSAxICYmIHBsYXllci55ID09IGN1cnJlbnRMb2NhdGlvbi55KSB7XG4gICAgICBtb3ZlUGxheWVyKDEsIDApO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAocGxheWVyLnggPT0gMSAqIGN1cnJlbnRMb2NhdGlvbi54ICsgMSAmJiBwbGF5ZXIueSA9PSBjdXJyZW50TG9jYXRpb24ueSkge1xuICAgICAgbW92ZVBsYXllcigtMSwgMCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChwbGF5ZXIueCA9PSAxICogY3VycmVudExvY2F0aW9uLnggJiYgcGxheWVyLnkgPT0gY3VycmVudExvY2F0aW9uLnkgLSAxKSB7XG4gICAgICBtb3ZlUGxheWVyKDAsIDEpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAocGxheWVyLnggPT0gMSAqIGN1cnJlbnRMb2NhdGlvbi54ICYmIHBsYXllci55ID09IDEgKiBjdXJyZW50TG9jYXRpb24ueSArIDEpIHtcbiAgICAgIG1vdmVQbGF5ZXIoMCwgLTEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoKG1hcC5nZXRUaWxlKDEgKiBjdXJyZW50TG9jYXRpb24ueCAtIDEsIDEgKiBjdXJyZW50TG9jYXRpb24ueSkgIT0gMCkgJiYgY2hlY2tlZC5pbmRleE9mKDEgKiBjdXJyZW50TG9jYXRpb24ueCAtIDEgKyAxMCAqIGN1cnJlbnRMb2NhdGlvbi55KSA9PSAtMSkge1xuICAgICAgICBxdWV1ZS5wdXNoKHt4IDogMSAqIGN1cnJlbnRMb2NhdGlvbi54IC0gMSwgeSA6IDEgKiBjdXJyZW50TG9jYXRpb24ueX0pO1xuICAgIH1cbiAgICBpZiAoKG1hcC5nZXRUaWxlKDEgKiBjdXJyZW50TG9jYXRpb24ueCArIDEsIDEgKiBjdXJyZW50TG9jYXRpb24ueSkgIT0gMCkgJiYgY2hlY2tlZC5pbmRleE9mKDEgKiBjdXJyZW50TG9jYXRpb24ueCArIDEgKyAxMCAqIGN1cnJlbnRMb2NhdGlvbi55KSA9PSAtMSkge1xuICAgICAgICBxdWV1ZS5wdXNoKHt4IDogMSAqIGN1cnJlbnRMb2NhdGlvbi54ICsgMSwgeSA6IDEgKiBjdXJyZW50TG9jYXRpb24ueX0pO1xuICAgIH1cbiAgICBpZiAoKG1hcC5nZXRUaWxlKDEgKiBjdXJyZW50TG9jYXRpb24ueCwgMSAqIGN1cnJlbnRMb2NhdGlvbi55IC0gMSkgIT0gMCkgJiYgY2hlY2tlZC5pbmRleE9mKDEgKiBjdXJyZW50TG9jYXRpb24ueCArIDEwICogKDEgKiBjdXJyZW50TG9jYXRpb24ueSAtIDEpKSA9PSAtMSkge1xuICAgICAgICBxdWV1ZS5wdXNoKHt4IDogMSAqIGN1cnJlbnRMb2NhdGlvbi54LCB5IDogMSAqIGN1cnJlbnRMb2NhdGlvbi55IC0gMX0pO1xuICAgIH1cbiAgICBpZiAoKG1hcC5nZXRUaWxlKDEgKiBjdXJyZW50TG9jYXRpb24ueCwgMSAqIGN1cnJlbnRMb2NhdGlvbi55ICsgMSkgIT0gMCkgJiYgY2hlY2tlZC5pbmRleE9mKDEgKiBjdXJyZW50TG9jYXRpb24ueCArIDEwICogKDEgKiBjdXJyZW50TG9jYXRpb24ueSArIDEpKSA9PSAtMSkge1xuICAgICAgICBxdWV1ZS5wdXNoKHt4IDogMSAqIGN1cnJlbnRMb2NhdGlvbi54LCB5IDogMSAqIGN1cnJlbnRMb2NhdGlvbi55ICsgMX0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRCdXR0b24oKSB7XG4gIHRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRCdXR0b25cIik7XG4gIHRCdXR0b24ub25jbGljayA9IGRlbW9BamF4O1xufVxuXG5mdW5jdGlvbiBkZW1vQWpheCgpIHtcbiAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZW1vXCIpLmlubmVySFRNTCA9IHhodHRwLnJlc3BvbnNlVGV4dDtcbiAgICB9XG4gIH07XG4gIHhodHRwLm9wZW4oXCJHRVRcIiwgXCJhcGkvdGVzdFwiLCB0cnVlKTtcbiAgeGh0dHAuc2VuZCgpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
